"use strict";function isStringEmpty(e){return null==e||""==e}function nl2br(e,o){var t=o||"undefined"==typeof o?"<br/>":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+t+"$2")}var ut=ut||{};ut.commons=ut.commons||{},ut.commons.utils=ut.commons.utils||{},ut.commons.utils.printDebugInformation=function(){if(console.log("*** ut.commons.utils.printDebugInformation ***"),"object"==typeof osapi?console.log("osapi: "+osapi):console.log("osapi is undefined."),"object"==typeof gadgets?console.log("gadgets: "+gadgets):console.log("gadgets is undefined."),"object"==typeof osapi){var e=osapi.newBatch();e.add("context",osapi.context.get()),e.add("viewer",osapi.people.getOwner()),e.add("app",osapi.apps.get({contextId:"@self"})),e.execute(function(e){console.log("actor.id (viewer.id): "+e.viewer.id);var o=e.context.contextType.slice(1),t=o.charAt(0).toUpperCase()+o.slice(1);console.log("objectType (context.contextType): "+t),console.log("generator.id (app.id): "+e.app.id)})}console.log("*** /debugInformation ***")};var resizeRequestPending=!1,resizeExecutionMillis=0,resizeCollectionMillis=250;ut.commons.utils.gadgetResize=function(){function e(){resizeRequestPending=!0,Date.now()>resizeExecutionMillis?(gadgets.window.adjustHeight(),resizeRequestPending=!1):setTimeout(e,resizeCollectionMillis)}"object"==typeof gadgets&&(gadgets.window?(resizeExecutionMillis=Date.now()+resizeCollectionMillis,resizeRequestPending||e()):console.warn('Please add <Require feature="dynamic-height"/> to your xml file.'))},ut.commons.utils.generateUUID_deprecated=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},ut.commons.utils.generateUUID=function(){var e=(new Date).getTime(),o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==o?t:7&t|8).toString(16)});return o},ut.commons.utils.getAttributeValue=function(e,o,t){var n=o.toLowerCase();return e[n]?e[n]:"undefined"!=typeof t?t:null},ut.commons.utils.addAttributeValueToOptions=function(e,o,t,n){var s=o.toLowerCase();e[s]?t[o]=e[s]:"undefined"!=typeof n&&(t[o]=n)},ut.commons.utils.getBooleanAttributeValue=function(e,o,t){var n=ut.commons.utils.getAttributeValue(e,o,t);if(!n)return!1;if("boolean"==typeof n)return n;var s=n.toLowerCase().trim();switch(s){case"true":case"on":return!0;default:return!1}},ut.commons.utils.getIntegerAttributeValue=function(e,o,t){var n=ut.commons.utils.getAttributeValue(e,o,t);switch(typeof n){case"string":return parseInt(n);case"number":return Math.round(n);default:return t}},ut.commons.utils.getCommonsPath=function(){var e="/commons/";if("undefined"!=typeof golab&&golab.common&&golab.common.resourceLoader)return golab.common.resourceLoader.getBaseUrl()+e;var o="http://go-lab.gw.utwente.nl/sources"+e,t=window.location.href,n=function(n){var s=t.lastIndexOf(n);s>=0&&(o=t.substr(0,s)+e)},s=["/tools/","/labs/","/web/"];for(var i in s){var r=s[i];if(n(r))break}return o},ut.commons.utils.commonsPath=ut.commons.utils.getCommonsPath(),ut.commons.utils.getCommonsImagesPath=function(){return ut.commons.utils.getCommonsPath()+"images/"},ut.commons.utils.commonsImagesPath=ut.commons.utils.getCommonsImagesPath(),ut.commons.utils.getCommonsImagesDataSourcesPath=function(){return ut.commons.utils.getCommonsPath()+"images/dataSources/"},ut.commons.utils.commonsImagesDataSourcesPath=ut.commons.utils.getCommonsImagesDataSourcesPath(),ut.commons.utils.equalizeHeight=function(){var e=[],o=function(t){if(Array.isArray(t))for(var n in t)o(t[n]);else e.push(t)};o(Array.prototype.slice.call(arguments));var t=function(){var o=[],n=0;for(n in e){var s=$(e[n]);s.each(function(e){o.push($(s[e]))})}if(0!=o.length){var i=[],r=0,a=Number.MAX_VALUE;for(n in o){var u=o[n].height();i.push(u),r=Math.max(r,u),a=Math.min(a,u)}if(a>0)for(n in o)r>i[n]&&o[n].height(r);else setTimeout(t,200)}};e.length&&t()},ut.commons.utils.scrollVerticalToVisible=function(e){var o,t,n;if(1===e.length){for(t=e;t&&"scroll"!==t.css("overflow-y");)n=t.parent(),t=n!==t&&t.length>0&&"HTML"!=t[0].tagName?n:null;t&&(o=e.position().top+e.height()-t.height(),t.scrollTop(o))}else console.warn("ut.commons.utils.scrollVerticalToVisible: expects only 1 DOM element, but found "+e.length),console.warn(e)};var specialChars=[{char:".",encodeRegExp:/\./g,decodeRegExp:/\\u002E/g,encodedChar:"\\u002E"},{char:"$",encodeRegExp:/\$/g,decodeRegExp:/\\u0024/g,encodedChar:"\\u0024"}],encodeSpecialJsonKeyChars=function(e){var o=e;for(var t in specialChars)o=o.replace(specialChars[t].encodeRegExp,specialChars[t].encodedChar);return o},decodeSpecialJsonKeyChars=function(e){var o=e;for(var t in specialChars)o=o.replace(specialChars[t].decodeRegExp,specialChars[t].char);return o},codeSpecialKeyCharsInJson=function(e,o){switch(typeof e){case"object":for(var t in e)if(codeSpecialKeyCharsInJson(e[t],o),"string"==typeof t){var n=o(t);if(n!==t){var s=e[t];delete e[t],e[n]=s}}break;default:return e}};ut.commons.utils.encodeSpecialKeyCharsInJson=function(e){codeSpecialKeyCharsInJson(e,encodeSpecialJsonKeyChars)},ut.commons.utils.decodeSpecialKeyCharsInJson=function(e){codeSpecialKeyCharsInJson(e,decodeSpecialJsonKeyChars)};