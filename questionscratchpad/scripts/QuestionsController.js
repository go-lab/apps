(function(){"use strict";var o,n,t;o=window.angular,window.ut=window.ut||{},window.ut.tools=window.ut.tools||{},window.ut.tools.questioning=window.ut.tools.questioning||{},t=golab.common.resourceLoader,window.ut.tools.questioning.QuestioningApp=o.module("QuestioningApp",["ui.sortable","LocalStorageModule","textAngular","monospaced.elastic","ui.knob","golabUtils"]),window.ut.tools.questioning.QuestioningApp.factory("resourceLoader",[function(){return golab.common.resourceLoader}]),window.ut.tools.questioning.QuestioningApp.factory("environmentHandlers",function(){return window.ut.tools.questioning.environmentHandlers}),window.ut.tools.questioning.QuestioningApp.factory("languageHandler",["environmentHandlers",function(o){return o.languageHandler}]),window.ut.tools.questioning.QuestioningApp.factory("actionLogger",["environmentHandlers",function(o){return o.questions.actionLogger}]),window.ut.tools.questioning.QuestioningApp.factory("storageHandler",["environmentHandlers",function(o){var n;return n=o.questions.storageHandler}]),window.ut.tools.questioning.QuestioningApp.factory("fileStorage",function(){return new ut.commons.persistency.FileStorage}),window.ut.tools.questioning.QuestioningApp.factory("configurationStorageHandler",["environmentHandlers",function(o){return o.configuration.storageHandler}]),window.ut.tools.questioning.QuestioningApp.factory("questionsModel",["environmentHandlers","configurationModel",function(o,n){var t;return t=new window.ut.tools.questioning.QuestionsModel(o,n)}]),window.ut.tools.questioning.QuestioningApp.factory("configurationModel",["environmentHandlers",function(o){var n;return n=new window.ut.tools.questioning.QuestionsConfigurationModel(o)}]),window.ut.tools.questioning.QuestioningApp.config(["$sceDelegateProvider",function(o){return o.resourceUrlWhitelist(["self",t.getBaseUrl()+"/**"])}]),window.ut.tools.questioning.QuestioningApp.run(["$rootScope","questionsModel","actionLogger","configurationModel","languageHandler","environmentHandlers",function(o,n,e,i,u,s){return o.resourceLoader=t,o.configurationModel=i,o.metadataHandler=s.questions.metadataHandler,o.actionLogger=s.questions.actionLogger,o.storageHandler=s.questions.storageHandler,o.languageHandler=u,o.questionsModel=new window.ut.tools.questioning.QuestionsModel(s),o.applyAlternativeConfiguration=function(o){return o instanceof window.ut.tools.questioning.QuestionsModel&&null!=window.golab.tools.configuration.questioning&&(console.log("no configuration resource found, but an 'old' js-configuration is present."),i.conditionals.setValues(window.golab.tools.configuration.questioning.conditionals.value),i.variables.setValues(window.golab.tools.configuration.questioning.variables.value),null!=window.golab.tools.configuration.questioning.auto_load&&"true"===window.golab.tools.configuration.questioning.auto_load.value&&i.setAutoLoadLatestResource(!0),!0)},null!=o.actionLogger&&o.actionLogger.logApplicationStarted(),o.deleteQuestion=function(n){var t,e;return e=o.questionsModel.deleteQuestion(n),t={objectType:"question",id:e},null!=o.actionLogger&&o.actionLogger.logRemove(t),0===o.questionsModel.getResourceContent().length&&(o.metadataHandler.setTargetId(ut.commons.utils.generateUUID()),o.metadataHandler.setTargetDisplayName("unnamed questions"),o.addQuestion()),setTimeout(function(){return ut.commons.utils.gadgetResize()},100)},o.addQuestion=function(n){return function(){var n,t;return t=o.questionsModel.addQuestion(),n={objectType:"question",id:t.id,content:t},null!=o.actionLogger&&o.actionLogger.logAdd(n),setTimeout(function(){return ut.commons.utils.gadgetResize()},100)}}(this),o.setQuestion=function(n){return function(n,t){var e;return e=o.questionsModel.setQuestion(n,t),window.clearTimeout(o.changeTimeoutId),o.changeTimeoutId=setTimeout(function(){var n;if(n={objectType:"question",id:e.id,content:e},null!=o.actionLogger)return o.actionLogger.logChange(n)},5e3)}}(this),setTimeout(function(){return o.$digest()},200)}]),n=function(o,n){},ut.tools.questioning.QuestioningApp.controller("QuestionsController",["$scope","configurationModel",n])}).call(this);
//# sourceMappingURL=QuestionsController.js.map
