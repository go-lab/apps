{"version":3,"sources":["run.js"],"names":[],"mappings":"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","file":"run.js","sourcesContent":["(function run(activityStatistics) {\n    const TOOL_NAME = 'Timeline';\n    const DOCUMENT_TYPE = 'not specified';\n    const FALLBACK_LANGUAGE = 'en';\n\n    try {\n        const errorDisplay = ErrorDisplay($('#error'), $('#error .alert .message'));\n        const loadingIndicator = LoadingIndicator($('#loading_indicator'));\n        const handleStartupError = getErrorHandler(errorDisplay, loadingIndicator);\n\n        loadingIndicator.show();\n\n        golab.common.createEnvironmentHandlers(DOCUMENT_TYPE, TOOL_NAME, FALLBACK_LANGUAGE,\n        function() {\n            const envHandlers = {\n                metadataHandler: arguments[0],\n                storageHandler: arguments[1],\n                actionLogger: arguments[2],\n                languageHandler: arguments[3],\n                notificationClient: arguments[4]\n            };\n            try {\n                moment.locale(envHandlers.languageHandler.getLanguage());\n                errorDisplay.setLanguageHandler(envHandlers.languageHandler);\n\n                try {\n                    activityStatistics.Application(\n                        envHandlers, loadingIndicator, getRoot(), errorDisplay\n                    );\n                } catch(err) {\n                    return handleStartupError(err);\n                }\n            } catch(error) {\n                handleStartupError(error);\n            }\n        });\n    } catch(error) {\n        console.error(error);\n        document.getElementsByTagName('body')[0].innerHTML =\n            'An error occured while starting the application.';\n    }\n\n    function getErrorHandler(errorDisplay, loadingIndicator) {\n        return function(error) {\n            console.error(error.stack);\n            errorDisplay.show('An error occured while starting the application.');\n            loadingIndicator.hide();\n        };\n    }\n\n    function LoadingIndicator(container) {\n        const $container = $(container);\n        return {\n            show: function() {\n                $container.show();\n            },\n            hide: function() {\n                $container.hide();\n            },\n        };\n    }\n\n    function ErrorDisplay(container, messageElement, languageHandler) {\n        container = $(container);\n        messageElement = messageElement ? $(messageElement) : container;\n\n        const closeBtn = container.find('button');\n        setCloseBtnBehaviour();\n\n        if (languageHandler) {\n            setAriaLabel();\n        }\n\n        return {\n            hide: hide,\n            show: function(message) {\n                if (message) {\n                    messageElement.text(message);\n                }\n                container.show();\n            },\n            setLanguageHandler: function(l) {\n                languageHandler = l;\n                setAriaLabel(languageHandler);\n            }\n        };\n\n        function hide() {\n            container.hide();\n        }\n\n        function setAriaLabel(languageHandler) {\n            closeBtn\n            .attr('aria-label', languageHandler.getMessage('close_alert'));\n        }\n\n        function setCloseBtnBehaviour() {\n            closeBtn.on('click', function() {\n                hide();\n            });\n        }\n    }\n\n    function getRoot() {\n        if (typeof gadgets !== 'undefined' && gadgets.util &&\n            gadgets.util.getUrlParameters) {\n            const root = gadgets.util.getUrlParameters().url;\n            return root.substr(0, root.lastIndexOf('/') + 1);\n        }\n        return '';\n    }\n\n})(golab.tools.activityStatistics);\n"],"sourceRoot":"/source/"}