{"version":3,"sources":["util.js"],"names":[],"mappings":"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","file":"util.js","sourcesContent":["/* global moment */\n(function(activityStatistics) {\n    function escapeHTML(string) {\n        const entityMap = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            '\\'': '&#39;',\n            '/': '&#x2F;',\n        };\n\n        string = '' + string;\n        return string.replace(/[&<>\"'\\/]/g, function(c) {\n            return entityMap[c];\n        });\n    }\n\n    function formatDate(date, format) {\n        return moment(date).format(format);\n    }\n\n    // from http://stackoverflow.com/a/13542669\n    function blendColors(color1, color2, percentage) {\n        let f=parseInt(color1.slice(1),16),t=parseInt(color2.slice(1),16),R1=f>>16,G1=f>>8&0x00FF,B1=f&0x0000FF,R2=t>>16,G2=t>>8&0x00FF,B2=t&0x0000FF;\n        return '#'+(0x1000000+(Math.round((R2-R1)*percentage)+R1)*0x10000+(Math.round((G2-G1)*percentage)+G1)*0x100+(Math.round((B2-B1)*percentage)+B1)).toString(16).slice(1);\n    }\n\n    const eventBus = {\n        mapHeadersToRows(data) {\n            if (!data.rows) return [];\n            return data.rows.map((row) => {\n                return data.header.reduce((result, header, index) => {\n                    const title = header.title.toLowerCase();\n                    let value = row[index];\n                    if (header.dataType === 'zonedDateTime') {\n                        value = new Date(value);\n                    }\n                    result[title] = value;\n                    return result;\n                }, {});\n            });\n        }\n    };\n\n    const throttle = (fn, delay) => $.throttle(delay, fn);\n\n    // from http://davidwalsh.name/detect-scrollbar-width\n    const measureScrollBarWidth = () => {\n        const scrollDiv = document.createElement('div');\n        scrollDiv.id = 'scrollbar_measure';\n        document.body.appendChild(scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        document.body.removeChild(scrollDiv);\n        return scrollbarWidth;\n    };\n\n    const counter = () => {\n        let current = 1;\n        return () => current++;\n    };\n\n    const math = {\n        // equilateral triangle\n        equiTri: {\n            areaFromHeight: (h) => Math.pow(h, 2) / Math.sqrt(3),\n        },\n    };\n\n    const triggerActionOnEvent = (\n        registerEvent,\n        triggerAction,\n        eventName,\n        actionName\n    ) => {\n        registerEvent(eventName, (...args) => {\n            triggerAction(actionName, ...args);\n        });\n    };\n\n    const scaleEquals = (scaleA, scaleB) => {\n        return (\n            R.equals(scaleA.domain(), scaleB.domain()) &&\n            R.equals(scaleA.range(), scaleB.range())\n        );\n    };\n\n    activityStatistics.util = {\n        triggerActionOnEvent,\n        escapeHTML,\n        formatDate,\n        blendColors,\n        eventBus,\n        throttle,\n        measureScrollBarWidth,\n        counter,\n        math,\n        scaleEquals,\n        colorBrewer: {\n            paired: [\n                '#a6cee3',\n                '#1f78b4',\n                '#b2df8a',\n                '#33a02c',\n                '#fb9a99',\n                '#e31a1c',\n                '#fdbf6f',\n                '#ff7f00',\n                '#cab2d6',\n                '#6a3d9a',\n                '#ffff99',\n                '#b15928'\n            ],\n            set3: [\n                '#8dd3c7',\n                // '#ffffb3',\n                '#bebada',\n                '#fb8072',\n                '#80b1d3',\n                '#fdb462',\n                '#b3de69',\n                '#fccde5',\n                '#d9d9d9',\n                '#bc80bd',\n                '#ccebc5',\n                // '#ffed6f'\n            ]\n        },\n    };\n})(golab.tools.activityStatistics);\n"],"sourceRoot":"/source/"}