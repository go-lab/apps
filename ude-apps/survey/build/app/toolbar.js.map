{"version":3,"sources":["toolbar.js"],"names":[],"mappings":"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","file":"toolbar.js","sourcesContent":["(function (ReflectionPoll) {\n    ReflectionPoll.Toolbar = Toolbar;\n\n    function Toolbar(container, getMsg, options) {\n        container = $(container);\n        options = options || {};\n\n        var showLabels = options.showLabels || false;\n        var actionLinkClickEvents = ReflectionPoll.PubSub();\n        var focusTrap = getFocusTrap();\n\n        renderPollViewTools();\n\n        return {\n            onActionClick: subscribeToActionClick,\n            showConfigTools: function () {\n                renderConfigTools();\n            },\n            showPollViewTools: function () {\n                renderPollViewTools();\n            },\n            showResultsViewTools: function () {\n                renderResultsViewTools();\n            },\n            showDownloadCSVTools: function () {\n                renderDownloadCSVTools();\n            },\n        };\n\n        function renderConfigTools() {\n            container.empty();\n            $('<ul></ul>')\n                .appendTo(container)\n                .append(saveTool())\n                .append(abortTool())\n                .append(importTool())\n                .append(exportTool())\n                .append(focusTrap);\n        }\n\n        function renderPollViewTools() {\n            container.empty();\n            $('<ul></ul>')\n                .appendTo(container)\n                .append(viewConfigTool())\n                .append(viewResultsTool())\n                .append(downloadTool())\n                .append(focusTrap);\n        }\n\n        function renderResultsViewTools() {\n            container.empty();\n            $('<ul></ul>')\n                .appendTo(container)\n                .append(viewConfigTool())\n                .append(viewPollTool())\n                .append(downloadTool())\n                .append(viewRefreshResultsTool())\n                .append(focusTrap);\n        }\n\n        function saveTool() {\n            return actionLink('save', 'save', 'save-file');\n        }\n\n        function abortTool() {\n            return actionLink('abort', 'abort_changes', 'remove');\n        }\n\n        function viewConfigTool() {\n            return actionLink('configure', 'configure', 'cog');\n        }\n\n        function viewResultsTool() {\n            return actionLink('view_results', 'view_results', 'stats');\n        }\n\n        function viewPollTool() {\n            return actionLink('view_poll', 'view_poll', 'stats');\n        }\n\n        function viewRefreshResultsTool() {\n            return actionLink('view_results', 'refresh_results', 'refresh');\n        }\n\n        function importTool() {\n            return actionLink('import', 'import', 'import');\n        }\n\n        function exportTool() {\n            return actionLink('export', 'export', 'export');\n        }\n\n        function downloadTool() {\n            return actionLink('download', 'download', 'download');\n        }\n\n        function getFocusTrap() {\n            return $('<a href=\"#\" class=\"focus_trap sr-only\" aria-hidden=\"true\" tabindex=\"-1\"></a>');\n        }\n\n        // action link is just a link with an icon, and click events are published\n        // to `actionLinkClickEvents`\n        function actionLink(actionName, msgKey, glyphiconKey) {\n            var msg = ReflectionPoll.util.escapeHTML(getMsg(msgKey));\n            var link = $('<a href=\"#\"></a>')\n                .append($('<span aria-hidden=\"true\" class=\"glyphicon glyphicon-' +\n                    glyphiconKey + '\"></span>'));\n\n            if (showLabels) {\n                link.append(' ' + msg);\n            } else {\n                link.attr('title', msg);\n            }\n\n            var item = $('<li></li>').append(link);\n\n            item.on('click', function (event) {\n                event.preventDefault();\n                actionLinkClickEvents.publish(actionName);\n                focusTrap.focus();\n            });\n\n            return item;\n        }\n\n        function subscribeToActionClick(actionName, handler) {\n            actionLinkClickEvents.subscribe(function (clickedAction) {\n                if (clickedAction === actionName) {\n                    handler.apply(null, Array.prototype.slice.call(arguments, 1));\n                }\n            });\n        }\n    }\n})(golab.tools.ReflectionPoll);\n"],"sourceRoot":"/source/"}