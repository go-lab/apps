(function(){"use strict";var n,e,o,i,t,a,l,r;window.ut=window.ut||{},ut.commons=ut.commons||{},i=0,o=function(n){return{restrict:"E",template:'<span>\n  <li ng-show="showEditConfiguration">\n    <i class="fa fa-gear fa-fw activeButton fontAweSomeButton" ng-click=\'editConfiguration($event)\'\n      title="{{\'editConfiguration.openButton.tooltip\' | g4i18n}}"></i>\n  </li>\n  <dialogBox id="{{editConfigurationDialogId}}" title="{{editConfigurationDialogTitle}}" icon="gear"\n    resizable="false" width="100%" maxWidth="700px">\n    <div class="golabConfigurationEditor">\n      <div ng-transclude></div>\n      <configurationSection label="i_editConfiguration.helpHtml">\n        <div class="row">\n          <div class="col-md-12">\n            <div class="col-md-6" style="padding-left: 0px;">\n              <span class="configurationFaRadioButton" ng-click=\'configurationModel.useConfigurationHelp = false\'\n                title="{{\'editConfiguration.useStandardToolHelp.tooltip\' | g4i18n}}">\n                <i class="fa fa-dot-circle-o fa-fw" ng-hide="configurationModel.useConfigurationHelp"></i>\n                <i class="fa fa-circle-o fa-fw" ng-show="configurationModel.useConfigurationHelp"></i>\n              </span>\n              <span g4i18n="editConfiguration.useStandardToolHelp"\n                title="{{\'editConfiguration.useStandardToolHelp.tooltip\' | g4i18n}}"></span>\n            </div>\n            <div class="col-md-6">\n              <span class="configurationFaRadioButton" ng-click=\'configurationModel.useConfigurationHelp = true\'\n                title="{{\'editConfiguration.useMyOwnToolHelp.tooltip\' | g4i18n}}">\n                <i class="fa fa-dot-circle-o fa-fw" ng-show="configurationModel.useConfigurationHelp" ></i>\n                <i class="fa fa-circle-o fa-fw" ng-hide="configurationModel.useConfigurationHelp"></i>\n              </span>\n              <span g4i18n="editConfiguration.useMyOwnToolHelp"\n                title="{{\'editConfiguration.useMyOwnToolHelp.tooltip\' | g4i18n}}"></span>\n            </div>\n          </div>\n          <div class="col-md-12" style="height: 0.4em;"></div>\n          <div class="col-md-12" ng-hide="configurationModel.useConfigurationHelp">\n            <div class="helpPreview" ng-bind-html="configurationModel.standardHelpHtml"></div>\n          </div>\n          <div class="col-md-12" ng-show="configurationModel.useConfigurationHelp">\n            <text-angular class="helpHtmlEditor" ng-model="configurationModel.helpHtml"></text-angular>\n          </div>\n        </div>\n      </configurationSection>\n      <configurationSection label="i_editConfiguration.specialLanguageTerms" ng-show="advancedConfigurationOptions">\n        <languageTermsEditor></languageTermsEditor>\n      </configurationSection>\n      <configurationSection label="i_editConfiguration.debugOptions" ng-show="advancedConfigurationOptions">\n        <div class="row evenColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.autoLoadLatestResource"/>\n            <span g4i18n="editConfiguration.autoLoadLatestResource"\n              title="{{\'editConfiguration.autoLoadLatestResource.tooltip\' | g4i18n}}"></span>\n          </div>\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.autoSave"/>\n            <span g4i18n="editConfiguration.autoSave"\n              title="{{\'editConfiguration.autoSave.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row oddColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.multiDocumentMode"/>\n            <span g4i18n="editConfiguration.multiDocumentMode"\n              title="{{\'editConfiguration.multiDocumentMode.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row evenColumnBackground configurationHighInputRow">\n          <div class="col-md-6" g4i18n="editConfiguration.defaultResourceName"\n            title="{{\'editConfiguration.defaultResourceName.tooltip\' | g4i18n}}"></div>\n          <div class="col-md-5"><input type="text" ng-model="configurationModel.defaultResourceName"\n            class="configurationTextInput"/></div>\n        </div>\n        <div class="row oddColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.loadInitialResource"/>\n            <span g4i18n="editConfiguration.loadInitialResource"\n              title="{{\'editConfiguration.loadInitialResource.tooltip\' | g4i18n}}"></span>\n          </div>\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.authoringMode"\n              ng-disabled=\'!configurationModel.applicationModel\' />\n            <span g4i18n="editConfiguration.authoringMode"\n              title="{{\'editConfiguration.authoringMode.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row evenColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.showLoadExamples">\n            <span g4i18n="editConfiguration.showLoadExamples"\n              title="{{\'editConfiguration.showLoadExamples.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row oddColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.showLoadConfiguration">\n            <span g4i18n="editConfiguration.showLoadConfiguration"\n              title="{{\'editConfiguration.showLoadConfiguration.tooltip\' | g4i18n}}"></span>\n          </div>\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.showResourceName"/>\n            <span g4i18n="editConfiguration.showResourceName"\n              title="{{\'editConfiguration.showResourceName.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row evenColumnBackground">\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.showImportExport"/>\n            <span g4i18n="editConfiguration.showImportExport"\n              title="{{\'editConfiguration.showImportExport.tooltip\' | g4i18n}}"></span>\n          </div>\n          <div class="col-md-6">\n            <input type="checkbox" class="configurationCheckbox" ng-model="configurationModel.showModelJson"/>\n            <span g4i18n="editConfiguration.showModelJson"\n              title="{{\'editConfiguration.showModelJson.tooltip\' | g4i18n}}"></span>\n          </div>\n        </div>\n        <div class="row oddColumnBackground configurationHighInputRow">\n          <div class="col-md-6" g4i18n="editConfiguration.collaborationStartupOption"\n            title="{{\'editConfiguration.collaborationStartupOption.tooltip\' | g4i18n}}"></div>\n          <div class="col-md-6">\n             <select ng-model="configuration.collaborationStartup"\n               ng-options="collaborationStartupOption.label for collaborationStartupOption in configuration.collaborationStartupOptions"\n             />\n          </div>\n        </div>\n      </configurationSection>\n    </div>\n    <div class="dialogButtonRow">\n      <toolbar>\n        <loadSave modelName="configurationModel" dataStoreName="{{configurationExampleStoreName}}" examples="true" XautoSave="false" single="true" clear="false" reset="false"></loadSave>\n        <li class="toolBarSpace"></li>\n        <li>\n           <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'cancel()\'\n             title="{{\'editConfiguration.close\' | g4i18n}}"></i>\n        </li>\n      </toolbar>\n    </div>\n  </dialogBox>\n</span>',replace:!0,transclude:!0,link:function(e,o,t){var a,l,r,c,u,s,d,g;return s=i++,u="editConfigurationDialogBox"+s,e.editConfigurationDialogId=u,e.advancedConfigurationOptions=!1,e.configurationModel?(c=e.configurationModel,!c instanceof window.ut.commons.ConfigurationModel?void console.error("expected to find a configuration model class object on the scope, which must be an instance of window.ut.commons.ConfigurationModel"):(e.toggleUseConfigurationHelp=function(){return c.useConfigurationHelp=!c.useConfigurationHelp},e.configurationExampleStoreName="",r=ut.commons.utils.getAttributeValue(t,"dataStoreName",""),r&&e[r]&&(e.configurationExampleStoreName=r),l=function(){var e,o,i,t;for(i=c.collaborationStartupOptions,t=[],e=0,o=i.length;e<o;e++)a=i[e],t.push({value:a,label:n.getMessage("editConfiguration.collaborationStartupOptions."+a)});return t}(),e.configuration={collaborationStartupOptions:l},d=function(){var n,o,i;for(i=[],n=0,o=l.length;n<o;n++)a=l[n],a.value===c.collaborationStartup&&i.push(e.configuration.collaborationStartup=a);return i},e.$watch("configuration.collaborationStartup",function(n,e){return c.collaborationStartup=n.value}),g=function(){return e.showEditConfiguration=c.getShowLoadConfiguration()||c.getForceShowLoadConfiguration(),e.editConfigurationDialogTitle=n.getMessage("editConfiguration.dialogTitle",c.getDisplayName()),d()},g(),setTimeout(function(){return c.addListeners(["modelChanged","modelLoaded","modelCleared","displayNameChanged"],function(){return g(),!1}),g()}),e.storageHandler=c.getStorageHandler(),e.loadResource=function(n){return e.cancel(),c.loadFromResource(n)},e.cancel=function(){return e.dialogBoxes[u].close()},e.editConfiguration=function(n){return e.advancedConfigurationOptions=(n.ctrlKey||n.altKey)&&n.shiftKey,e.dialogBoxes[u].show()})):void console.error("the configuration model must be defined on the scope with name configurationModel")}}},ut.commons.golabUtils.directive("editConfiguration".toLowerCase(),["languageHandler",o]),n=function(n,e,o){return{restrict:"E",template:'<div class="test">\n  <div class="row">\n    <div class="col-md-12 configurationSectionTitle" ng-class="{firstConfigurationSectionTitle: firstSection}">\n      <i class="fa fa-chevron-right fa-fw activeButton fontAweSomeButtonSmall" ng-hide="sectionShown"\n       ng-click="showSection()" title="{{\'editConfiguration.showSection.tooltip\' | g4i18n}}"></i>\n      <i class="fa fa-chevron-down fa-fw activeButton fontAweSomeButtonSmall" ng-show="sectionShown"\n       ng-click="hideSection()" title="{{\'editConfiguration.hideSection.tooltip\' | g4i18n}}"></i>\n      <span class="secondaryTextButton" ng-click=\'showHideSection()\'>{{title}}</span>\n    </div>\n  </div>\n  <div ng-transclude ng-show=\'sectionShown\' class="configurationSectionContent"></div>\n</div>\n',replace:!1,transclude:!0,scope:!0,link:function(i,t,a){var l,r,c,u,s;return i.firstSection=ut.commons.utils.getBooleanAttributeValue(a,"firstSection",!1),u=ut.commons.utils.getAttributeValue(a,"label","???"),i.title=e.getI_Message(u),i.sectionShown=!1,l=u.replace(/\./g,"_"),n=i.configurationModel,r=function(){if(!n.configUISettings.showHideSections)return n.configUISettings.showHideSections={}},c=function(){if(r(),"boolean"==typeof n.configUISettings.showHideSections[l])return i.sectionShown=n.configUISettings.showHideSections[l]},n.addListeners(["modelLoaded"],function(){return c()}),s=function(){return r(),n.configUISettings.showHideSections[l]=i.sectionShown},i.showSection=function(){return i.sectionShown=!0,s(),o(function(){var n;return n=t.find(".configurationSectionContent"),n=t.find(".test"),ut.commons.utils.scrollVerticalToVisible(n)}),ut.commons.utils.gadgetResize()},i.hideSection=function(){return i.sectionShown=!1,s(),ut.commons.utils.gadgetResize()},i.showHideSection=function(){return i.sectionShown?i.hideSection():i.showSection()}}}},ut.commons.golabUtils.directive("configurationSection".toLowerCase(),["configurationModel","languageHandler","$timeout",n]),e={originalEvent:{},selectedIndexChanged:{}},r=function(n,e,o){return{restrict:"E",template:'<div>\n  <div class="row configurationOptionTitle nameListTitle">\n    <span class="col-md-6 nameListEditorTitle">{{title}}</span>\n    <span class="col-md-6 nameListControls">\n      <i class="fa fa-plus fa-fw activeButton fontAweSomeButtonSmall"\n       ng-click="addName()" title="{{\'editConfiguration.nameListEditor.addName.tooltip\' | g4i18n}}"></i>\n      <i class="fa fa-minus fa-fw activeButton fontAweSomeButtonSmall" ng-class=\'{disabledButton: selection.index<0}\'\n       ng-click="removeName($event)" title="{{\'editConfiguration.nameListEditor.removeName.tooltip\' | g4i18n}}"></i>\n      <i class="fa fa-arrow-up fa-fw activeButton fontAweSomeButtonSmall" ng-class=\'{disabledButton: !selection.canMoveUp}\'\n       ng-click="moveSelectionUp()" title="{{\'editConfiguration.nameListEditor.moveSelectionUp.tooltip\' | g4i18n}}"></i>\n      <i class="fa fa-arrow-down fa-fw activeButton fontAweSomeButtonSmall" ng-class=\'{disabledButton: !selection.canMoveDown}\'\n       ng-click="moveSelectionDown()" title="{{\'editConfiguration.nameListEditor.moveSelectionDown.tooltip\' | g4i18n}}"></i>\n    </span>\n  </div>\n  <div ng-repeat=\'name in nameList.getNameValues(false) track by $index\' class="row">\n    <nameEditor index="{{$index}}" class="col-md-12 nameEditor{{$index}}" ng-class="{selectedNameEditor: $index==selection.index}"></nameEditor>\n  </div>\n</div>\n',replace:!0,scope:{nameList:"=nameList".toLowerCase()},link:function(n,i,t){var a,l,r;if(!(n.nameList instanceof window.ut.commons.NamedEventArray))throw new Error("the attribute nameList does not return an instance of window.ut.commons.NamedEventArray ");return n.title=e.getMessage(ut.commons.utils.getAttributeValue(t,"label","")),n.selection={index:-1,canMoveUp:!1,canMoveDown:!1},n.$watch("selection.index",function(e){if(n.$parent.selectedIndexChanged)return n.$parent.selectedIndexChanged(e)}),r=Date.now(),l=function(n){var e;return n.originalEvent.detail>0?1===n.originalEvent.detail:(e=n.timeStamp-r,r=n.timeStamp,e>300)},n.addName=function(){return n.nameList.addNewName(),o(function(){var n;return n=i.find(".nameEditor:last"),n.find("input:first").focus()})},n.removeName=function(e){if(n.selection.index>=0&&l(e))return n.nameList.remove(n.selection.index),n.changeSelection(n.selection.index)},n.changeSelection=function(e){if(e>=n.nameList.length-1&&(e=n.nameList.length-1),n.selection.index!==e)return n.selection.index=e,e>=0?(n.selection.canMoveUp=e>0,n.selection.canMoveDown=e<n.nameList.length-1):(n.selection.canMoveUp=!1,n.selection.canMoveDown=!1),a()},a=function(){if(n.selection.index>=0)return o(function(){var e;return e=i.find(".nameEditor"+n.selection.index),e.find("input:first").focus()},0)},n.moveSelectionUp=function(){var e;if(e=n.selection.index,e>0)return n.nameList.swapValues(e-1,e),n.changeSelection(e-1)},n.moveSelectionDown=function(){var e;if(e=n.selection.index,e<n.nameList.length-1)return n.nameList.swapValues(e,e+1),n.changeSelection(e+1)},n.enterAction=function(e){var o;return o=e+1,o>=n.nameList.length&&n.nameList.getNameValue(e).length>0&&n.addName(),n.changeSelection(o)}}}},ut.commons.golabUtils.directive("nameListEditor".toLowerCase(),["configurationModel","languageHandler","$timeout",r]),l=function(n){return{restrict:"E",template:"<div>\n  <div class=\"nameEditor\">\n    <input ng-model=\"name\" ng-focus='focused()' ng-blur='blurred()' ng-enter=\"typedEnter()\"\n      ng-up-arrow='typedUpArrow()' ng-down-arrow='typedDownArrow()'>\n  </div>\n</div>\n",replace:!0,link:function(n,e,o){var i,t;return i=ut.commons.utils.getIntegerAttributeValue(o,"index",0),n.index=i,n.name=n.nameList.getNameValue(i),n.focused=function(){return n.changeSelection(i)},t=n.name,n.blurred=function(){if(t!==n.name)return i=ut.commons.utils.getIntegerAttributeValue(o,"index",0),n.nameList.getNameValue(i)!==n.name&&n.nameList.setNameValue(i,n.name),t=n.name},n.typedEnter=function(){return n.blurred(),n.enterAction(i)},n.typedUpArrow=function(){return n.blurred(),n.moveSelectionUp()},n.typedDownArrow=function(){return n.blurred(),n.moveSelectionDown()}}}},ut.commons.golabUtils.directive("nameEditor".toLowerCase(),["configurationModel",l]),a=function(n,e,o){return{restrict:"E",template:"<div>\n  <div ng-repeat='updateableLanguageTerm in updateableLanguageTerms'>\n    <languageTermEditor></languageTermEditor>\n  </div>\n</div>\n",replace:!0,scope:{nameList:"=nameList".toLowerCase()},link:function(i,t,a){var l;return i.updateableLanguageTerms=[],l=function(){var o,t,a,l,r,c,u,s,d,g,f,m,p;if(d={},s=$("[g4i18n]"),$.each(s,function(n){var e,o;if(o=$(s[n]),e=o.attr("g4i18n"))return d[e]=!0}),f=function(){var o;o=[];for(l in d)p=d[l],o.push({key:l,value:e.getMsg(l),newValue:n.getSpecialLanguageTermValue(l)});return o}(),f.sort(function(n,e){return n.key<e.key?-1:n.key>e.key?1:0}),i.updateableLanguageTerms.length>0){for(m={},c=i.updateableLanguageTerms,t=0,r=c.length;t<r;t++)g=c[t],m[g.key]=g;for(o=a=0,u=f.length;0<=u?a<u:a>u;o=0<=u?++a:--a)g=f[o],m[g.key]&&(m[g.key].newValue=f[o].newValue,f[o]=m[g.key])}if(i.updateableLanguageTerms=f,i.updateableLanguageTerms.length>0)return ut.commons.golabUtils.updateSpecialLanguageTerms(n,e)},o(l),n.addListeners(["specialLanguageTermsChanged","modelLoaded"],function(){return l(),ut.commons.golabUtils.updateSpecialLanguageTerms(n,e)})}}},ut.commons.golabUtils.directive("languageTermsEditor".toLowerCase(),["configurationModel","languageHandler","$timeout",a]),t=function(n,e){return{restrict:"E",template:'<div class="nameEditor">\n  <div class="row">{{updateableLanguageTerm.key}} <i class="fa fa-arrow-right fa-fw"></i> {{updateableLanguageTerm.value}}</div>\n  <div class=\'row\'>\n    <div class="col-md-1">\n    </div>\n    <div class="col-md-11">\n      <input ng-model="updateableLanguageTerm.newValue" ng-blur=\'newValueBlurred()\'>\n    </div>\n  </div>\n</div>\n',replace:!0,link:function(e,o,i){var t;return t=e.updateableLanguageTerm.newValue,e.newValueBlurred=function(){if(t!==e.updateableLanguageTerm.newValue)return n.setSpecialLanguageTermValue(e.updateableLanguageTerm.key,e.updateableLanguageTerm.newValue),t=e.updateableLanguageTerm.newValue}}}},ut.commons.golabUtils.directive("languageTermEditor".toLowerCase(),["configurationModel","languageHandler",t])}).call(this);
//# sourceMappingURL=configuration.js.map
