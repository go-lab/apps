(function(){"use strict";var e,a;window.ut=window.ut||{},ut.commons=ut.commons||{},ut.tools=ut.tools||{},ut.tools.conclusions=ut.tools.conclusions||{},e=0,a=function(a,o,t,n,l,s){return{restrict:"E",template:'<span>\n  <li>\n    <i class="fa fa-plus fa-fw activeButton fontAweSomeButton" ng-class="{disabledButton: !addDataPossible}"\n       ng-click="addData()" title="{{\'conclusions.addData\' | g4i18n}}"></i>\n  </li>\n  <li>\n    <i class="fa fa-minus fa-fw activeButton fontAweSomeButton" ng-class="{disabledButton: selectedDataIndex<0}"\n       ng-click="deleteData()" title="{{\'conclusions.deleteData\' | g4i18n}}"></i>\n  </li>\n  <dialogBox id="{{selectDataSourceBoxId}}" title="{{selectDataSourceDialogTitle}}" resizable="false"\n             width="500" Xheight="400">\n    <div class="activeButton" ng-click="addDataGraphResource()" ng-show="configurationModel.useDataGraphs">\n      <i class="fa fa-folder-open-o fa-fw fontAweSomeButton"></i>\n      {{\'conclusions.selectDataSourceDialog.dataGraphResource\' | g4i18n}}\n    </div>\n    <div class="activeButton" ng-click="addDataGraphExample()" ng-show="configurationModel.useExamples">\n      <i class="fa fa-gift fa-fw fontAweSomeButton"></i>\n      {{\'conclusions.selectDataSourceDialog.dataGraphExample\' | g4i18n}}\n    </div>\n    <div class="activeButton" ng-click="addObservation()" ng-show="configurationModel.useObservations">\n      <i class="fa fa-folder-open-o fa-fw fontAweSomeButton"></i>\n      {{\'conclusions.selectDataSourceDialog.observation\' | g4i18n}}\n    </div>\n    <div class="dialogButtonRow">\n      <ul class="toolbar">\n        <li>\n           <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton"\n             ng-click=\'closeSelectDataSource()\' title="{{\'loadSave.showModelJsonDialog.close\' | g4i18n}}"></i>\n        </li>\n      </ul>\n    </div>\n  </dialogBox>\n  <dialogBox id="{{loadDataResourceBoxId}}" title="{{loadDataResourceDialogTitle}}" resizable="false"\n             width="500" Xheight="400">\n    <resourceSelection resourceType="dataGraph" storageHandler="" g4i18nbasekey="loadSave.loadDialog"></resourceSelection>\n  </dialogBox>\n  <dialogBox id="{{loadDataExampleDialogId}}" title="{{loadDataExampleDialogTitle}}" resizable="false" width="500"\n             Xheight="400">\n    <loadExample exampleStoreName="dataGraphExampleStore" dialogId="{{loadDataExampleDialogId}}"></loadExample>\n  </dialogBox>\n  <dialogBox id="{{selectObservationDialogId}}" title="{{selectObservationDialogTitle}}" resizable="false" width="500"\n             Xheight="400">\n    <div class="observationList">\n      <observation ng-repeat="observation in getObservations() | reverse" class=\'selectableListItem\'\n        ng-class="{selectedObservation:$index===selectedObservationIndex, lastSelectableListItem:$last}"\n        ng-click="selectObservation($index)" ng-dblclick=\'loadSelectedObservation()\'></observation>\n    </div>\n    <div class="dialogButtonRow">\n      <ul class="toolbar">\n        <li>\n           <i class="fa fa-play fa-fw activeButton fontAweSomeButton dialogButton"\n            ng-class="{disabledButton: selectedObservationIndex<0}" ng-click=\'loadSelectedObservation()\' title="{{loadTitle}}"></i>\n        </li>\n        <li>\n           <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton"\n             ng-click=\'closeSelectObservation()\' title="{{\'loadSave.showModelJsonDialog.close\' | g4i18n}}"></i>\n        </li>\n      </ul>\n    </div>\n  </dialogBox>\n</span>',replace:!0,scope:!0,link:function(t,i,c){var d,r,u,g,f,v,D,x,p;return d=n.getConclusionActionLogger(),g=e++,D="selectDataSourceBox"+g,v="loadDataResourceBox"+g,f="loadDataExampleDialog"+g,x="selectObservationDialog"+g,t.loadDataResourceBoxId=v,t.selectDataSourceBoxId=D,t.loadDataExampleDialogId=f,t.selectObservationDialogId=x,u=a.getMessage("resources.type.name.dataGraph"),t.selectDataSourceDialogTitle=a.getMessage("conclusions.selectDataSourceDialog.dialogTitle",u),t.loadDataResourceDialogTitle=a.getMessage("loadSave.loadDialog.dialogTitle",u),t.loadDataExampleDialogTitle=a.getMessage("conclusions.loadDataExampleDialog.dialogTitle",u),t.selectObservationDialogTitle=a.getMessage("conclusions.selectObservationDialog.dialogTitle"),t.storageHandler=o.getStorageHandler(),t.addData=function(){if(t.addDataPossible){if(r()>1)return t.dialogBoxes[D].show();if(s.useDataGraphs)return t.addDataGraphResource();if(s.useExamples)return t.addDataGraphExample();if(s.useObservations)return t.addObservation()}},t.closeSelectDataSource=function(){return t.dialogBoxes[D].close()},t.addDataGraphResource=function(){return t.dialogBoxes[D].close(),t.dialogBoxes[v].show()},t.addDataGraphExample=function(){return t.dialogBoxes[D].close(),t.loadExampleResource=function(e){return t.loadResource(e,"")},t.dialogBoxes[f].show()},t.closeDataExample=function(){return t.dialogBoxes[f].close()},t.cancel=function(){return t.dialogBoxes[v].close()},t.loadResource=function(e,a){var o,n;return null==a&&(a=v),console.log(e),"string"==typeof e.content&&(e.content=JSON.parse(e.content)),a&&t.dialogBoxes[a].close(),o=null!=(n=t.selectedStatementConclusion)?n.addDataGraphResource(e):void 0,t.selectData(o),d.logDataGraphAdded(t.selectedStatementConclusion,o)},t.getObservations=function(){var e;return e=l.getObservations()},t.addObservation=function(){return t.dialogBoxes[D].close(),t.dialogBoxes[x].show(),l.isSaved()&&l.getId()?l.reloadFromStorage(function(e){return t.$apply()}):l.loadLatestResource(function(e){return t.$apply()})},t.closeSelectObservation=function(){return t.dialogBoxes[x].close()},t.selectedObservationIndex=-1,t.selectObservation=function(e){return t.selectedObservationIndex=e},t.loadSelectedObservation=function(){var e,a,o,n;if(t.selectedObservationIndex>=0)return a=l.getObservations(),o=a.length-1-t.selectedObservationIndex,e=a[o],t.dialogBoxes[x].close(),e=null!=(n=t.selectedStatementConclusion)?n.addObservation(e):void 0,t.selectData(e),d.logObservationAdded(t.selectedStatementConclusion,e)},r=function(){var e;return e=0,s.useDataGraphs&&++e,s.useExamples&&++e,s.useObservations&&++e,e},p=function(){var e,a;return a=!1,e=n.getStatements(),e.length&&(a=!0),t.statementsLoaded=a,t.addDataPossible=a&&r()>0},n.addListeners(["selectedStatementChanged","modelLoaded","modelCleared"],function(){return p(),!1}),s.addListeners(["modelChanged"],function(){return p(),!1}),p()}}},ut.tools.conclusions.conclusionTool.directive("dataListControls".toLowerCase(),["languageHandler","dataGraphModel","localStorageService","conclusionModel","observationsModel","configurationModel",a])}).call(this);
//# sourceMappingURL=dataListControls.js.map
