"use strict";var ut;!function(o){var e;!function(e){var t;!function(e){function t(e,t,r,a){return{restrict:"E",template:'\n<div class=\'reportSection\'>\n   <div>\n      <span ng-show="reportModel.editMode">\n         <i class="fa fa-chevron-right fa-fw activeButton fontAweSomeButtonSmall" ng-hide="sectionShown"\n            ng-click="showSection()" title="{{\'editConfiguration.showSection.tooltip\' | g4i18n}}"></i>\n         <i class="fa fa-chevron-down fa-fw activeButton fontAweSomeButtonSmall" ng-show="sectionShown"\n            ng-click="hideSection()" title="{{\'editConfiguration.hideSection.tooltip\' | g4i18n}}"></i>\n      </span>\n      <span class="reportSectionTitle" ng-click=\'showHideSection()\'>{{reportSection.title}}</span>\n   </div>\n  <div ng-show="sectionShown || !reportModel.editMode">\n     <div class=\'reportSectionQuestion\' ng-show="reportModel.editMode" ng-bind-html="reportSection.explanation"></div>\n     <div class="paragraphsContainer" ng-class="{paragraphsContainerDropHeight: reportModel.editMode}" droppable>\n       <ul ui-sortable="sortableOptions" ng-model="reportSection.reportParagraphs">\n         <li ng-repeat="reportParagraph in reportSection.reportParagraphs" \n            objectType="reportParagraph" objectId="{{reportParagraph.id}}" class="dontShowDropNotAllowed"\n             ng-class="{dropObjectOutSideDropArea: reporting.removeLocation && reporting.objectIdBeingDragged===reportParagraph.id}">\n            <reportParagraph></reportParagraph>\n         </li>\n       </ul>\n     </div>\n  </div>\n</div>\n',replace:!1,link:function(t,i,c){var l=t;l.sectionShown=!0,l.showSection=function(){l.sectionShown=!0,o.commons.utils.gadgetResize()},l.hideSection=function(){l.sectionShown=!1,o.commons.utils.gadgetResize()};var p=[],g=function(){p.length=0;var o=l.reportElement.find(".paragraphsContainer");o.each(function(e){var t=angular.element(o[e]),n=t.offset(),r=t.height();p.push({top:n.top,bottom:n.top+r})})},s=null,d=0,u=function(o){var e=l.golabContainerContent.scrollTop(),t=o.pageY+e-d,n=!0;p.forEach(function(o){t>o.top&&t<o.bottom&&(n=!1)}),l.reporting.removeLocation=n};l.reporting.removeLocation=!1,l.reporting.objectIdBeingDragged="",l.sortableOptions={axis:"y",handle:".paragraphType",tolerance:"pointer",activate:function(o,e){n&&(console.log("activate()"),console.log(o),console.log(e))},start:function(o,e){n&&(console.log("start()"),console.log(o),console.log(e)),a.on("mousemove",u),l.reporting.objectDropHandled=!1,l.reporting.objectIdBeingDragged=e.item.attr("objectId"),s=angular.element(e.item),d=l.golabContainerContent.scrollTop(),g()},beforeStop:function(o,e){n&&(console.log("beforeStop()"),console.log(o),console.log(e))},out:function(o,e){n&&(console.log("out()"),console.log(o),console.log(e))},over:function(o,e){n&&(console.log("over()"),console.log(o),console.log(e))},receive:function(o,e){n&&(console.log("receive()"),console.log(o),console.log(e))},remove:function(o,e){n&&(console.log("remove()"),console.log(o),console.log(e))},sort:function(o,e){n&&(console.log("sort()"),console.log(o),console.log(e))},stop:function(o,t){if(n&&(console.log("stop()"),console.log(o),console.log(t)),!l.reporting.objectDropHandled&&l.reporting.removeLocation){var r=t.item.attr("objectId");e.removeReportParagraphById(r),e.reportActionLogger.logParagraphRemoved(r)}a.off("mousemove",u),l.reporting.removeLocation=!1},update:function(o,e){n&&(console.log("update()"),console.log(o),console.log(e))}},l.objectDroppedInside=function(o,t,n){switch(o.dropObjectType){case"newParagraph":var a=parseInt(o.dropObjectId),i=l.reportSection,c=i.createNewReportParagraph(a);return i.addReportParagraph(c,!0),e.reportActionLogger.logParagraphAdded(c),!0;case"reportParagraph":return r(function(){var t=e.moveReportParagraphToReportSection(o.dropObjectId,l.reportSection);e.reportActionLogger.logParagraphMoved(t)}),l.reporting.objectDropHandled=!0,!0;case"uploadedImage":return!1;default:console.log("unexpected draggableInformation.dropObjectType: "+o.dropObjectType),console.log(o)}return!1}}}}var n=!1;e.reportingTool.directive("reportSection".toLowerCase(),["reportModel","configurationModel","$timeout","$document",t])}(t=e.reportingtool||(e.reportingtool={}))}(e=o.tools||(o.tools={}))}(ut||(ut={}));
//# sourceMappingURL=reportSection.js.map
