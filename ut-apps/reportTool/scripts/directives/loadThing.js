"use strict";var ut;!function(e){var t;!function(e){var t;!function(e){function t(t,o,i,n,r,a,l){return{restrict:"E",template:'\n<div class=\'loadResource\'>\n   <i class="fa fa-folder-open-o fa-fw activeButton fontAweSomeButton faEditButton" ng-click=\'askForResource()\'\n      title="{{openTooltip}}"></i>\n  <dialogBox id="{{loadThingDialogId}}" title="{{loadResourceDialogTitle}}" icon="folder-open-o" resizable="false" width="500"\n          Xheight="400">\n     <div class="selectionList">\n        <div ng-repeat="orderedPhaseThingsModels in orderedPhasesThingsModels">\n           <div class="phaseTitle" ng-class="{firstPhaseTitle: $first}" ng-show="orderedPhasesThingsModels.length>1">\n               {{orderedPhaseThingsModels.phaseTitle}}\n           </div>\n           <div ng-repeat="thingsModelWrapper in orderedPhaseThingsModels.orderedThingsModelWrappers">\n               <div class="resourceModelName"  ng-show="orderedPhaseThingsModels.orderedThingsModelWrappers.length>1">\n                   {{thingsModelWrapper.displayName}}\n               </div>\n               <div ng-repeat="thing in thingsModelWrapper.things" class="listItem"\n                   ng-class="{lastListItem: $last}">\n                   <div class=\'thing\'\n                      ng-class="{selectedThing:thing===selectedThing}"\n                      ng-click="selectThing(thingsModelWrapper, thing)" ng-dblclick="loadThing()">\n                      <div ng-switch on="paragraphType">\n                         <hypothesisView ng-switch-when="Hypothesis"></hypothesisView>\n                         <questionView ng-switch-when="Question"></questionView>\n                         <observationView ng-switch-when="Observation"></observationView>\n                      </div>\n                   </div>\n               </div>\n           </div>\n        </div>\n     </div>\n     <div class="pleaseWaitIcon" style="display: block" ng-show="retrievingResourceList"></div>\n     <div class="dialogButtonRow">\n       <ul class="toolbar">\n         <li>\n            <i class="fa fa-refresh fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'reload()\'\n             title="{{reloadTitle}}"></i>\n         </li>\n         <li>\n            <i class="fa fa-play fa-fw activeButton fontAweSomeButton dialogButton"\n             ng-class="{disabledButton: selectedThing==null}" ng-click=\'loadThing()\' title="{{loadTitle}}"></i>\n         </li>\n         <li>\n            <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'cancel()\'\n              title="{{cancelTitle}}"></i>\n         </li>\n       </ul>\n     </div>\n  </dialogBox>\n\n</div>\n',replace:!1,link:function(o,d,c){var g=function(){function e(e){switch(this._thingsModel=e,e.getResourceType()){case"hypotheses":this._things=e.getHypotheses();break;case"questions":this._things=e.getQuestions();break;case"observations":this._things=e.observations;break;default:throw Error("Unsupported resource type: "+e.getResourceType())}}return Object.defineProperty(e.prototype,"thingsModel",{get:function(){return this._thingsModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"things",{get:function(){return this._things},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this._thingsModel.getDisplayName()},enumerable:!0,configurable:!0}),e}(),h=o,u=s++,p="loadThingBox"+u;h.loadThingDialogId=p,h.paragraphType=e.ParagraphType[h.reportParagraph.paragraphType],h.resourceType=h.reportParagraph.resourceType;var f=l.getMessage("resources.type.name."+h.resourceType+".single");h.loadResourceDialogTitle=l.getMessage("reportingTool.includeDialog.title",f),h.openTooltip=l.getMessage("reportingTool.include.tooltip",f),h.retrievingResourceList=!1,h.thingsModels=[],h.selectedThingsModel=null,h.selectedThing=null;var v=null;switch(h.resourceType){case"hypotheses":v=i;break;case"questions":v=n;break;case"observations":v=r;break;default:throw Error("Unsupported resource type: "+h.resourceType)}var T=function(e){h.retrievingResourceList=!0,v.loadLatestResource(function(t,o,i){h.retrievingResourceList=!1,t?a.reportError("problems with loading of the thing resources: "+t,"problems with loading of the hypotheses resources",t):(h.orderedPhasesThingsModels=v.getOrderedResources().map(function(e){var t=e.phaseTitle;return"__tools__"===t&&(t=l.getMessage("ils.tools")),{phaseTitle:t,orderedThingsModelWrappers:e.orderedResources.map(function(e){return new g(e)})}}),e&&e())})};h.askForResource=function(){T(function(){h.dialogBoxes[p].show()})},h.reload=function(){T()},h.cancel=function(){h.dialogBoxes[p].close()},h.selectThing=function(e,t){h.selectedThingsModel=e,h.selectedThing=t},h.loadThing=function(){if(h.selectedThing){var e=h.reportParagraph,o=h.selectedThingsModel.thingsModel.getResource();e.resource.getPublished()===o.metadata.published&&e.thingId===h.selectedThing.id||(e.resource.loadFromResource(o),e.thingId=h.selectedThing.id,t.reportActionLogger.logThingLoaded(e)),h.dialogBoxes[p].close()}}}}}function o(e,t){return{restrict:"E",template:'\n<div hypothesis readOnly="true" class="hypothesisView"></div>\n',replace:!1,link:function(e,t,o){var i=e;e.$watch("thing",function(e,t){i.hypothesis=e})}}}function i(e,t){return{restrict:"E",template:'\n<div question readOnly="true" class="questionView"></div>\n',replace:!1,link:function(e,t,o){var i=e;e.$watch("thing",function(e,t){i.question=e})}}}function n(e,t){return{restrict:"E",template:'\n<observation readOnly="true" class="observationView"></observation>\n',replace:!1,link:function(e,t,o){var i=e;e.$watch("thing",function(e,t){i.observation=e})}}}var s=0;e.reportingTool.directive("loadThing".toLowerCase(),["reportModel","configurationModel","multiHypothesesModel","multiQuestionsModel","multiObservationsModel","errorHandler","languageHandler",t]),e.reportingTool.directive("hypothesisView".toLowerCase(),["reportModel","configurationModel",o]),e.reportingTool.directive("questionView".toLowerCase(),["reportModel","configurationModel",i]),e.reportingTool.directive("observationView".toLowerCase(),["reportModel","configurationModel",n])}(t=e.reportingtool||(e.reportingtool={}))}(t=e.tools||(e.tools={}))}(ut||(ut={}));
//# sourceMappingURL=loadThing.js.map
