(function(){"use strict";var t=function(t,n){function o(){this.constructor=t}for(var l in n)e.call(n,l)&&(t[l]=n[l]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ut=window.ut||{},ut.commons=ut.commons||{},ut.tools=ut.tools||{},ut.tools.tabletool=ut.tools.tabletool||{},ut.tools.tabletool.TableModel=function(e){function n(t,e){null==e&&(e=null),n.__super__.constructor.call(this,t,"table"),this._rowLabels=[],this._columnLabels=[],e instanceof ut.tools.tabletool.TableToolConfigurationModel?this.configurationModel=e:this.configurationModel=null,this.clearCellContents(),Object.defineProperties(this,{cellContents:{get:this.getCellContents,set:this.setCellContents}}),this.configurationModel&&(this.configurationModel.addListeners(["modelCleared","contentCleared","modelLoaded","contentLoaded","rowsValueChanged","rowsValuesChanged","rowsPushed","rowsRemoved","columnsValueChanged","columnsValuesChanged","columnsPushed","columnRemoved"],function(t){return function(){return t.configurationChanged()}}(this)),this._rowLabels=this.configurationModel.rowLabels.getValues(),this._columnLabels=this.configurationModel.columnLabels.getValues())}return t(n,e),n.prototype.createNewModel=function(){return new window.ut.tools.tabletool.TableModel(this.environmentHandlers,this.configurationModel)},n.prototype.isChangeTrackingFullyImplemented=function(){return!0},n.prototype.applyLogChange=function(t,e){var o,l,s,i;switch(o=!1,t.object.objectType){case"cellContent":l=t.object.content.columnIndex,i=t.object.content.rowIndex,s=t.object.content.content,this.setCellContent(i,l,s);break;default:n.__super__.applyLogChange.apply(this,arguments),o=!0}if(!o)return e(null)},n.prototype.isEmpty=function(){var t,e,n,o,l,s,i;for(s=this.getCellContents(),e=0,o=s.length;e<o;e++)for(i=s[e],n=0,l=i.length;n<l;n++)if(t=i[n])return!1;return!0},n.prototype.getCellContents=function(){return this._cellContents},n.prototype.setCellContents=function(t){var e,n,o,l,s,i,r,u,h,c;for(this.clearCellContents(),c=this.getRowLabels(),n=this.getColumnLabels(),h=o=0,i=c.length;0<=i?o<i:o>i;h=0<=i?++o:--o)for(u=h<t.length?t[h]:[],e=l=0,r=n.length;0<=r?l<r:l>r;e=0<=r?++l:--l)s=e<u.length?u[e]:"",this._cellContents[h][e]!==s&&(this._cellContents[h][e]=s,this.emitEvent("cellContentChanged",[h,e,s]));return this.emitModelChanged()},n.prototype.getCellContent=function(t,e){return t<this._cellContents.length&&e<this._cellContents[t].length?this._cellContents[t][e]:""},n.prototype.setCellContent=function(t,e,n,o){if(null==o&&(o=!0),t<this._cellContents.length&&e<this._cellContents[t].length&&(o||this._cellContents[t][e]!==n))return this._cellContents[t][e]=n,this.emitEvent("cellContentChanged",[t,e,n]),this.emitModelChanged(o)},n.prototype.getResourceContent=function(){return{rowLabels:this.getRowLabels(),columnLabels:this.getColumnLabels(),cellContents:this.getCellContents()}},n.prototype.loadFromResourceContent=function(t){var e,n,o,l,s;if(t.rowLabels)this._rowLabels=t.rowLabels;else if(this.configurationModel)this._rowLabels=this.configurationModel.rowLabels.getValues();else for(this._rowLabels.length=0,e=n=0,l=t.cellContents.length;0<=l?n<l:n>l;e=0<=l?++n:--n)this._rowLabels.push("");if(t.columnLabels)this._columnLabels=t.columnLabels;else if(this.configurationModel)this._columnLabels=this.configurationModel.columnLabels.getValues();else if(this._columnLabels.length=0,t.cellContents.length>0)for(e=o=0,s=t.cellContents[0].length;0<=s?o<s:o>s;e=0<=s?++o:--o)this._columnLabels.push("");return this.setCellContents(t.cellContents)},n.prototype.clearContent=function(){return this.clearCellContents(),n.__super__.clearContent.call(this)},n.prototype.getRowLabels=function(){return this._rowLabels},n.prototype.getColumnLabels=function(){return this._columnLabels},n.prototype.clearCellContents=function(){var t,e,n,o,l,s,i,r,u,h;for(t=[],i=this._rowLabels,n=0,l=i.length;n<l;n++){for(h=i[n],u=[],r=this._columnLabels,o=0,s=r.length;o<s;o++)e=r[o],u.push("");t.push(u)}return this._cellContents=t},n.prototype.configurationChanged=function(){var t,e,n,o,l,s,i,r,u,h;if(this._rowLabels=this.configurationModel.rowLabels.getValues(),this._columnLabels=this.configurationModel.columnLabels.getValues(),e=this._rowLabels.length-this.cellContents.length,e>0)for(n=o=0,i=e;0<=i?o<i:o>i;n=0<=i?++o:--o)this.cellContents.push([]);else e<0&&this.cellContents.splice(this.cellContents.length- -e,-e);for(r=this.cellContents,u=[],l=0,s=r.length;l<s;l++)h=r[l],t=this._columnLabels.length-h.length,t>0?u.push(function(){var e,o,l;for(l=[],n=e=0,o=t;0<=o?e<o:e>o;n=0<=o?++e:--e)l.push(h.push(""));return l}()):t<0?u.push(h.splice(h.length- -t,-t)):u.push(void 0);return u},n}(ut.commons.ResourceEventEmitterModel)}).call(this);
//# sourceMappingURL=tableModel.js.map
