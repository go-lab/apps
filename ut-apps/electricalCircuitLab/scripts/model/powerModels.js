var __extends=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},ut;!function(t){var e;!function(t){var e;!function(t){"use strict";var e=function(t){function e(e,o,i,n,r,u,a,s,l,c){t.call(this,e,o,i,n,r,0,l,c),this.minimum=u,this.maximum=a,this.step=s}return __extends(e,t),e.prototype.setFormattedValue=function(e){var o=e;if("number"==typeof this.minimum&&(o=Math.max(o,this.minimum)),"number"==typeof this.maximum&&(o=Math.min(o,this.maximum)),this.acMode&&(o=Math.max(o,0)),isNaN(o))throw Error("trying to setFormattedValue of "+this.getId()+" with a Nan: "+e);t.prototype.setFormattedValue.call(this,o)},e.prototype.getMinimumValue=function(){return this.minimum},e.prototype.getMaximumValue=function(){return this.maximum},e.prototype.getStepValue=function(){return Math.max(this.step,this.getValue().minimumStep)},e.prototype.getJson=function(){return{id:this.getId(),value:this.getValue().value}},e.prototype.loadFromJson=function(t){this.setFormattedValue(t.value)},e.prototype.getConfigJson=function(){return{type:this.getType(),label:this.getLabel(),minimum:this.getMinimumValue(),maximum:this.getMaximumValue(),step:this.getStepValue()}},e.prototype.loadConfigJson=function(t){this.minimum=t.minimum,this.maximum=t.maximum,this.step=t.step},e.prototype.clear=function(){t.prototype.clear.call(this)},e}(t.MeterModel);t.RangedMeterModel=e;var o=function(t){function e(e,o,i,n,r,u,a,s,l,c){t.call(this,e,o,i,n,r,u,a,s,l,c)}return __extends(e,t),e.prototype.getType=function(){return this.acMode?"acVoltageSource":"dcVoltageSource"},e}(e);t.VoltageRangedMeterModel=o;var i=function(){function t(t,i,n){this.powerId=t,this.label=i,this._acMode=n,this.voltageModel=null,this.frequencyModel=null,this.shortCircuit=!1,"undefined"==typeof this.label&&(this.label="power"),this.voltageModel=new o("voltage"+t,"voltageSource","V",0,0,(-25),25,.001,this.label+" voltage",n),this.frequencyModel=new e("frequency"+t,"frequencySource","Hz",1,1,1,999999,1,this.label+" frequency",n),this.frequencyModel.setFormattedValue(1e3)}return t.prototype.createNewModel=function(){var e=new t(this.getId(),this.getLabel(),this.acMode);return e.loadConfigJson(this.getConfigJson()),e.loadFromJson(this.getJson()),e},Object.defineProperty(t.prototype,"acMode",{get:function(){return this._acMode},set:function(t){this._acMode!==t&&(this._acMode=t,this.voltageModel.acMode=t,this.frequencyModel.acMode=t)},enumerable:!0,configurable:!0}),t.prototype.getId=function(){return this.powerId},t.prototype.getType=function(){return"dcVoltageSource"},t.prototype.getLabel=function(){return this.label},Object.defineProperty(t.prototype,"voltage",{get:function(){return this.voltageModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this.frequencyModel},enumerable:!0,configurable:!0}),t.prototype.setShortCircuit=function(t){this.shortCircuit=t},t.prototype.getShortCircuit=function(){return this.shortCircuit},t.prototype.getJson=function(){return{id:this.getId(),label:this.getLabel(),voltage:this.voltageModel.getJson(),frequency:this.frequencyModel.getJson(),shortCircuit:this.getShortCircuit(),acMode:this.acMode}},t.prototype.loadFromJson=function(t){this.shortCircuit=t.shortCircuit===!0,t.label&&(this.label=t.label),t.voltage?(this.voltageModel.loadFromJson(t.voltage),this.frequencyModel.loadFromJson(t.frequency)):(this.voltageModel.loadFromJson(t),this.frequencyModel.clear())},t.prototype.getConfigJson=function(){return{type:this.getType(),voltage:this.voltageModel.getConfigJson(),frequency:this.frequencyModel.getConfigJson()}},t.prototype.loadConfigJson=function(t){this.voltageModel.loadConfigJson(t.voltage),t.frequency&&this.frequencyModel.loadConfigJson(t.frequency)},t.prototype.clear=function(){this.shortCircuit=!1,this.voltageModel.clear(),this.frequencyModel.clear()},t}();t.PowerModel=i}(e=t.electricity||(t.electricity={}))}(e=t.simulations||(t.simulations={}))}(ut||(ut={}));
//# sourceMappingURL=powerModels.js.map
