(function(){"use strict";var t,e,r,n,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},o={}.hasOwnProperty,s=function(t,e){return function(){return t.apply(e,arguments)}};window.ut=window.ut||{},ut.simulations=ut.simulations||{},ut.simulations.electricity=ut.simulations.electricity||{},ut.simulations.electricity.meter=ut.simulations.electricity.meter||{},ut.commons=ut.commons||{},n="mµnpfazy",t="KMGT",r="INF",ut.simulations.electricity.meter.formatValue=function(e,i,o){var s,u,c,a,l,p;if(p=e<0?"-":"",c=Math.abs(e),s="",a=0,c<1){for(;a<i&&c<1;)a++,c*=1e3;l=c<1?c.toFixed(3):c.toPrecision(4),a>0&&(s=n[a-1])}else if(c===1/0)l=r;else if(c>=1e3){for(i=t.length;a<i&&c>=1e3;)a++,c/=1e3;l=l=c<1?c.toFixed(3):c.toPrecision(4),a>0&&(s=t[a-1])}else l=c.toPrecision(4);return u=""+p+l,{value:u*Math.pow(10,-3*a),display:u+" "+s+o,displayNumber:u}},e={DataSourceColumn:null},ut.simulations.electricity.MeterDataSourceColumn=function(t){function e(t){this.meter=t,e.__super__.constructor.call(this)}return i(e,t),e.prototype.getImageInformation=function(){return{type:"commonImage",value:this.meter.getType()+"Meter.png"}},e.prototype.getType=function(){return"number"},e.prototype.getId=function(){return this.meter.getId()},e.prototype.getLabel=function(){return this.meter.getLabel()},e.prototype.getUnit=function(){return this.meter.getUnit()},e.prototype.getValue=function(){return this.meter.getValue()},e}(ut.commons.DataSourceColumn),e={meterId:"",meterType:"",unit:"",maxFactor:0,meterNr:""},ut.simulations.electricity.MeterModel=function(){function t(t,e,r,n,i,o){switch(this.meterId=t,this.meterType=e,this.unit=r,this.maxFactor=n,this.meterNr=i,this.label=o,this.meterNr){case 0:case 1:case 2:break;default:throw new Error("meterNr must be 0, 1 or 2, but is "+this.meterNr)}this.sensors=[],this.clear(),this.dataSourceColumn=new ut.simulations.electricity.MeterDataSourceColumn(this)}return t.prototype.getId=function(){return this.meterId},t.prototype.getType=function(){return this.meterType},t.prototype.getUnit=function(){return this.unit},t.prototype.getMeterNr=function(){return this.meterNr},t.prototype.getLabel=function(){return this.label},t.prototype.getDataSourceColumn=function(){return this.dataSourceColumn},t.prototype.getSensors=function(){return this.sensors},t.prototype.addSensor=function(t){return t.setMeter(this),this.sensors.push(t)},t.prototype.getValue=function(){return this.value},t.prototype.setFormattedValue=function(t){return this.value=ut.simulations.electricity.meter.formatValue(t,this.maxFactor,this.unit)},t.prototype.sensorStateChanged=function(){var t,e,r,n,i,o;for(t=!0,i=this.sensors,e=0,r=i.length;e<r;e++)o=i[e],o.isPlaced()&&o.isConnected()||(t=!1);return n=t?this.calculateValue():0,this.setFormattedValue(n)},t.prototype.calculateValue=function(){return 0},t.prototype.updateState=function(){},t.prototype.clear=function(){var t,e,r,n,i;for(this.setFormattedValue(0),r=this.sensors,n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.sensorStateChanged());return n},t.prototype.getConfigJson=function(){return{type:this.getType(),label:this.getLabel(),maxFactor:this.maxFactor}},t}(),e={sensorNr:"",sensorType:"",hidden:!1},ut.simulations.electricity.SensorModel=function(){function t(t,e,r,n,i){this.meterId=t,this.meterNr=e,this.sensorNr=r,this.sensorType=n,this.hidden=i,this.sensorId=this.meterId+"_"+this.sensorNr,this.cmpId1="",this.cmpId2="",this.placeCounter=0,this.connectionPointState=null,this.state=null,this.meter=null}return t.prototype.toString=function(){return"SensorModel{id="+this.getId()+",cmpId1="+this.cmpId1+",cmpId2="+this.cmpId2+"}"},t.prototype.getId=function(){return this.sensorId},t.prototype.getNr=function(){return this.sensorNr},t.prototype.getType=function(){return this.sensorType},t.prototype.getMeterId=function(){return this.meterId},t.prototype.getMeterNr=function(){return this.meterNr},t.prototype.isHidden=function(){return!!this.hidden},t.prototype.setMeter=function(t){return this.meter=t},t.prototype.place=function(t){return this.cmpId1=t.cmpId1,this.cmpId2=t.cmpId2,this.updateLocation()},t.prototype.remove=function(){return this.cmpId1="",this.cmpId2="",this.updateLocation()},t.prototype.updateLocation=function(){return++this.placeCounter},t.prototype.getPlace=function(){return{cmpId1:this.cmpId1,cmpId2:this.cmpId2}},t.prototype.isPlaced=function(){return this.cmpId1.length>0&&this.cmpId2.length>0},t.prototype.isConnected=function(){return null!==this.state},t.prototype.setState=function(t){return this.state=t,this.sensorStateChanged()},t.prototype.sensorStateChanged=function(){var t;return null!=(t=this.meter)?t.sensorStateChanged():void 0},t.prototype.getCurrentValue=function(){return this.state?this.state.acCurrent.modulus():0},t.prototype.getVoltageValue=function(){return this.state?this.state.acVoltage.modulus():0},t.prototype.getJson=function(){return{id:this.getId(),type:this.getType(),meterId:this.getMeterId(),meterNr:this.getMeterNr(),cmpId1:this.cmpId1,cmpId2:this.cmpId2}},t}(),ut.simulations.electricity.AmpereMeterModel=function(t){function e(t,r,n,i){e.__super__.constructor.call(this,t,"ampere","A",r,n,i),this.currentSensor=new ut.simulations.electricity.SensorModel(t,n,0,"ampere"),this.addSensor(this.currentSensor)}return i(e,t),e.prototype.calculateValue=function(){return this.currentSensor.getCurrentValue()},e}(ut.simulations.electricity.MeterModel),ut.simulations.electricity.VoltMeterModel=function(t){function e(t,r,n,i){e.__super__.constructor.call(this,t,"volt","V",r,n,i),this.minusSensor=new ut.simulations.electricity.SensorModel(t,n,0,"voltMinus"),this.plusSensor=new ut.simulations.electricity.SensorModel(t,n,1,"voltPlus"),this.addSensor(this.minusSensor),this.addSensor(this.plusSensor)}return i(e,t),e.prototype.calculateValue=function(){return this.plusSensor.getVoltageValue()-this.minusSensor.getVoltageValue()},e}(ut.simulations.electricity.MeterModel),ut.simulations.electricity.WattMeterModel=function(t){function e(t,r,n,i){e.__super__.constructor.call(this,t,"watt","W",r,n,i),this.minusAndCurrentSensor=new ut.simulations.electricity.SensorModel(t,n,0,"wattVA"),this.plusSensor=new ut.simulations.electricity.SensorModel(t,n,1,"wattV"),this.addSensor(this.minusAndCurrentSensor),this.addSensor(this.plusSensor)}return i(e,t),e.prototype.calculateValue=function(){var t;return t=this.plusSensor.getVoltageValue()-this.minusAndCurrentSensor.getVoltageValue(),Math.abs(t*this.minusAndCurrentSensor.getCurrentValue())},e}(ut.simulations.electricity.MeterModel),e={circuitSimulatorEngine:null},ut.simulations.electricity.OhmMeterModel=function(t){function e(t,r,n,i,o){this.circuitSimulatorEngine=o,this.calculateValue=s(this.calculateValue,this),e.__super__.constructor.call(this,t,"ohm","Ω",r,n,i)}return i(e,t),e.prototype.calculateValue=function(){var t,e,r,n,i;return n=t=1/0,e=function(t){return function(){var e,r,n,i,o;for(n=function(t){var e;return e=t.circuitResult,!(e.error||!e.componentSequence)&&e.isOhmMeterCircuit},o=t.circuitSimulatorEngine.getCircuits(),r=0,i=o.length;r<i;r++)if(e=o[r],n(e))return e;return null}}(this),i=e(),i&&i.circuitResult&&("shortCircuit"===i.circuitResult.state?r=0:i.circuitResult.circuitProperties&&(r=i.circuitResult.circuitProperties.resistance)),r},e.prototype.updateState=function(){return this.sensorStateChanged()},e}(ut.simulations.electricity.MeterModel)}).call(this);
//# sourceMappingURL=meterModels.org.js.map
