var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},ut;!function(e){var t;!function(t){var o;!function(t){"use strict";var o={acMode:!1,imageSet:"symbolic",showResistorColorBars:!0,showLightEffect:!0,circuitBoardOptions:{xSize:5,ySize:6},availableComponents:[{type:"wire",x:0,y:0,rotate:0},{type:"corner",x:0,y:0,rotate:0},{type:"split",x:0,y:0,rotate:0},{type:"cross",x:0,y:0,rotate:0},{type:"resistor",x:0,y:0,rotate:0,resistance:100},{type:"dcVoltageSource",x:0,y:0,rotate:0,voltage:10},{type:"battery1_5V",x:0,y:0,rotate:0,voltage:1.5},{type:"battery9V",x:0,y:0,rotate:0,voltage:9},{type:"switch2Off",x:0,y:0,rotate:0},{type:"switch2Left",x:0,y:0,rotate:0},{type:"light",x:0,y:0,rotate:0,resistance:50,voltage:5},{type:"ohmMeterSource",x:0,y:0,rotate:0,resistance:0,voltage:1}],availablePowerSupplies:[{type:"dcVoltageSource",label:"power",voltage:{value:0,minimum:-25,maximum:25,step:.001}}],availableMeters:[{type:"ampere",label:"amp 1",maxFactor:2},{type:"volt",label:"volt 1",maxFactor:2},{type:"watt",label:"power 1",maxFactor:2},{type:"ohm",label:"ohm",maxFactor:0}]},i="\n<ul>\n  <li> Batteries<br/> The batteries in the “Components” container are working independent from the power supply. </li>\n  <li> Meters<br/> The circle with the letter of the meter represents the sensor. Drag the small circles within each meter and place them on the circuit board. </li>\n  <li> Removing things<br/> You can remove things from the circuit by dragging them outside the circuit area. </li>\n  <li> Editing resistor values<br/> Select the resistor and click on it. </li>\n  <li> Switches<br/> Select the switch and click on it. </li>\n  <li> Light bulbs<br/> The light bulbs do not work in IE9 or earlier. </li>\n</ul>\n   ",r={metadata:{actor:{objectType:"person",id:"unknown user@http://130.89.152.19:8080",displayName:"unknown user"},target:{objectType:"configuration",forApplication:"circuitLab",id:"70ad09b4-7dc0-4a82-d71a-62bbf30d10bfssf",displayName:"initial configuration"},generator:{objectType:"application",url:"http://130.89.152.19:8080/golab/tools/hypothesis/src/main/webapp/hypothesis.html",id:"ce6fc3d0-c48e-4929-f282-a77bb97dcc57tgd",displayName:"circuitLab"},provider:{objectType:"ils",url:"http://130.89.152.19:8080/golab/tools/hypothesis/src/main/webapp/hypothesis.html",id:"http://130.89.152.19:8080",inquiryPhase:"unknown",inquiryPhaseId:null,inquiryPhaseName:null,displayName:"unknown"},published:"2014-09-30T08:15:08.148Z",id:"a0fee60f-7fc8-45c5-fccb-52616418d9cffsgs"},content:o},a=function(o){function a(e){o.call(this,e,i,"electricalCircuitLab"),this.circuitBoardModels=[],this.circuitSimulatorEngine=null,this.availableComponents=new t.ListForObjectsWithId,this._configValues={imageSets:["symbolic","realistic"]},this._acMode=!1,this._imageSet=this._configValues.imageSets[0],this._showResistorColorBars=!0,this._showResistorValue=!0,this._showLightBulbPowerValue=!0,this._showLightBulbVoltageValue=!0,this._showLightEffect=!0,this.circuitBoardOptions={xSize:5,ySize:6},this.availableMeters=[],this.availablePowerSupplies=[]}return __extends(a,o),Object.defineProperty(a.prototype,"configValues",{get:function(){return this._configValues},enumerable:!0,configurable:!0}),a.prototype.getCircuitBoardOptions=function(){return this.circuitBoardOptions},a.prototype.setCircuitBoardOptions=function(e){return e.xSize&&(this.circuitBoardOptions.xSize=e.xSize),e.ySize&&(this.circuitBoardOptions.ySize=e.ySize),this.emitModelChanged()},Object.defineProperty(a.prototype,"imageSet",{get:function(){return this._imageSet},set:function(e){this._configValues.imageSets.indexOf(e)>=0&&this._imageSet!==e&&(this._imageSet=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"acMode",{get:function(){return this._acMode},set:function(e){this._acMode!==e&&(this._acMode=e,this.circuitSimulatorEngine&&(this.circuitSimulatorEngine.acMode=e),this.availableMeters.map(function(t){return t.acMode=e}),this.availablePowerSupplies.map(function(t){return t.acMode=e}),this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showResistorColorBars",{get:function(){return this._showResistorColorBars},set:function(e){this._showResistorColorBars!==e&&(this._showResistorColorBars=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showResistorValue",{get:function(){return this._showResistorValue},set:function(e){this._showResistorValue!==e&&(this._showResistorValue=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLightBulbPowerValue",{get:function(){return this._showLightBulbPowerValue},set:function(e){this._showLightBulbPowerValue!==e&&(this._showLightBulbPowerValue=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLightBulbVoltageValue",{get:function(){return this._showLightBulbVoltageValue},set:function(e){this._showLightBulbVoltageValue!==e&&(this._showLightBulbVoltageValue=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLightEffect",{get:function(){return this._showLightEffect},set:function(e){this._showLightEffect!==e&&(this._showLightEffect=e,this.emitModelChanged())},enumerable:!0,configurable:!0}),a.prototype.setCircuitSimulatorEngine=function(e){this.circuitSimulatorEngine=e},a.prototype.addCircuitBoardModel=function(e){this.circuitBoardModels.push(e)},a.prototype.loadDefaultConfiguration=function(){this.loadFromResource(r)},a.prototype.getResourceContent=function(){var e=o.prototype.getResourceContent.call(this);return e.availableComponents=this.availableComponents.getList().map(function(e){return e.getJson()}),e.availableMeters=this.availableMeters.map(function(e){return e.getConfigJson()}),e.availablePowerSupplies=this.availablePowerSupplies.map(function(e){return e.getConfigJson()}),e.circuitBoardOptions=this.getCircuitBoardOptions(),e.imageSet=this.imageSet,e.acMode=this.acMode,e.showResistorColorBars=this.showResistorColorBars,e.showResistorValue=this.showResistorValue,e.showLightBulbPowerValue=this.showLightBulbPowerValue,e.showLightBulbVoltageValue=this.showLightBulbVoltageValue,e.showLightEffect=this.showLightEffect,e},a.prototype.loadFromResourceContent=function(e){o.prototype.loadFromResourceContent.call(this,e),this.clearContent(),this.loadMeters(e.availableMeters),this.loadPowerSupplies(e.availablePowerSupplies),this.loadComponents(e.availableComponents),e.circuitBoardOptions&&this.setCircuitBoardOptions(e.circuitBoardOptions),e.imageSet&&(this.imageSet=e.imageSet),null!=e.acMode?this.acMode=e.acMode:this.acMode=!1,null!=e.showResistorColorBars&&(this.showResistorColorBars=e.showResistorColorBars),null!=e.showResistorValue&&(this.showResistorValue=e.showResistorValue),null!=e.showLightBulbPowerValue&&(this.showLightBulbPowerValue=e.showLightBulbPowerValue),null!=e.showLightBulbVoltageValue&&(this.showLightBulbVoltageValue=e.showLightBulbVoltageValue),null!=e.showLightEffect&&(this.showLightEffect=e.showLightEffect)},a.prototype.loadMeters=function(t){var o=this,i=function(){var i=-1,r=-1,a=-1,s=-1,n=function(t){var n=0,l=3;switch(t.minFactor?(n=t.minFactor,l=t.maxFactor):n=-t.maxFactor,t.type){case"ampere":return++i,new e.simulations.electricity.AmpereMeterModel("amp"+i,n,l,i,t.label,o.acMode);case"volt":return++r,new e.simulations.electricity.VoltMeterModel("volt"+r,n,l,r,t.label,o.acMode);case"watt":return++a,new e.simulations.electricity.WattMeterModel("watt"+a,n,l,a,t.label,o.acMode);case"ohm":return++s,new e.simulations.electricity.OhmMeterModel("ohm"+s,n,l,s,t.label,o.acMode,o.circuitSimulatorEngine);default:return console.log("unknown meter type: "+JSON.stringify(t)),null}},l=[];return t&&t.forEach(function(e){var t=n(e);t&&l.push(t)}),l};this.availableMeters=i(),this.circuitSimulatorEngine&&this.circuitSimulatorEngine.setMeters(this.availableMeters),this.circuitBoardModels.forEach(function(e){var t=[];t=o.circuitSimulatorEngine.circuitModel===e?o.availableMeters:i(),e.getAvailableMeters().replaceMeters(t)})},a.prototype.loadPowerSupplies=function(t){var o=this,i=function(){var i=-1,r=function(t){switch(t.type){case"dcVoltageSource":if(++i,0===i){var r=new e.simulations.electricity.PowerModel("dcVoltageSource"+i,t.label,o.acMode);return r.loadConfigJson(t),r}throw new Error("Only one powerSource is allowed");default:return console.log("unknown power supply type type: "+JSON.stringify(t)),null}},a=[];return t&&t.forEach(function(e){var t=r(e);t&&a.push(t)}),a};this.availablePowerSupplies=i(),this.circuitBoardModels.forEach(function(e){e.getAvailablePowerSupplies().replacePowerSupplies(i())})},a.prototype.createComponent=function(e){return new t.ComponentModel(e,(!0))},a.prototype.loadComponents=function(e){var t=this,o=[];e&&e.forEach(function(e){o.push(t.createComponent(e))}),this.availableComponents.replaceObjects(o)},a.prototype.getComponentDAO=function(){var e=this;return{getAvailableComponents:function(){return e.availableComponents.getList()},getNewComponent:function(t){return e.createComponent(e.availableComponents.getObject(t).getJson())}}},a}(e.commons.ConfigurationModel);t.CircuitLabConfigurationModel=a}(o=t.electricity||(t.electricity={}))}(t=e.simulations||(e.simulations={}))}(ut||(ut={}));
//# sourceMappingURL=circuitLabConfigurationModel.js.map
