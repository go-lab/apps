var ut;!function(n){var o;!function(o){var t;!function(o){"use strict";var t=n.commons.tsutils.Map;o.splitBiDirectionalGraph=function(n,e,i){for(var c=o.debugModelCalculations,r=n,a=e,s=function(n){r=r.filter(function(o){return!n.connectionPointMapTyped.containsKey(o.getId())}),a.asArray().forEach(function(o){n.connectionLinkMapTyped.containsKey(o.id)&&a.removeLink(o)}),i=i.filter(function(o){return!n.componentMapTyped.containsKey(o.getId())}),c&&console.log("After remove: nr of connectionLinks: "+a.size()+", nr of connectionPoints: "+r.length+", nr of components: "+i.length)},l=function(){var n=new t,o=new t,e=function(t){o.put(t.getId(),t);var i=a.getFromLinks(t);i.forEach(function(o){n.containsKey(o.id)||(n.put(o.id,o),e(o.toNode))})};return e(r[0]),[n,o]},u=function(n){var o=new t;return n.values().forEach(function(n){var t=n.getComponent();o.put(t.getId(),t)}),o},f=function(n){var t=new o.LinkArray;return n.values().forEach(function(n){t.addLink(n)}),t},p=function(n){var o=function(){console.log("Used components:");for(var o=0,t=0,e=n.components;t<e.length;t++){var i=e[t];console.log(" "+o+": "+i.getDisplayId()),++o}},t=function(){console.log("Used connectionLinks:\n"+n.connectionLinks.getAllLinksAsString(" ")),console.log("Used connectionPoints:");for(var o=0,t=0,e=n.connectionPoints;t<e.length;t++){var i=e[t];console.log(" "+o+": "+i);for(var c=0,r=0,a=n.connectionLinks.getFromLinks(i);r<a.length;r++){var s=a[r];console.log("  "+c+": to "+s.toNode),++c}++o}};console.log("Information of found bidirection graph"),o(),t()},g=[],d=i.length;r.length>0&&d>0;){var v=l(),m=v[0],h=v[1],y=u(m),k={connectionLinkMap:m.mapObject,connectionPointMap:h.mapObject,componentMap:y.mapObject,connectionLinkMapTyped:m,connectionPointMapTyped:h,componentMapTyped:y,connectionPoints:h.values(),components:y.values(),connectionLinks:f(m)};g.push(k),s(k),c&&p(k),--d}return c&&console.log("Found nr of bidirectional graphs: "+g.length),g}}(t=o.electricity||(o.electricity={}))}(o=n.simulations||(n.simulations={}))}(ut||(ut={}));
//# sourceMappingURL=biDirectionalGraphSplitter.js.map
