(function(){"use strict";var e;window.ut=window.ut||{},ut.commons=ut.commons||{},ut.commons.ResourceEventEmitterModel=ut.commons.ResourceEventEmitterModel||{},ut.simulations=ut.simulations||{},ut.simulations.electricity=ut.simulations.electricity||{},e={availableComponents:[{type:"wire",x:0,y:0,rotate:0},{type:"corner",x:0,y:0,rotate:0},{type:"split",x:0,y:0,rotate:0},{type:"cross",x:0,y:0,rotate:0},{type:"resistor",x:0,y:0,rotate:0,resistance:100},{type:"dcVoltageSource",x:0,y:0,rotate:0,voltage:10},{type:"battery1_5V",x:0,y:0,rotate:0,voltage:1.5},{type:"battery9V",x:0,y:0,rotate:0,voltage:9},{type:"switch2Off",x:0,y:0,rotate:0},{type:"switch2Left",x:0,y:0,rotate:0},{type:"ohmMeterSource",x:0,y:0,rotate:0,resistance:0,voltage:1}],availablePowerSupplies:[{type:"dcVoltageSource",label:"power",voltage:{value:0,minimum:-25,maximum:25,step:.001}}],availableMeters:[{type:"volt",label:"volt 1",maxFactor:2},{type:"watt",label:"power 1",maxFactor:2},{type:"ohm",label:"ohm",maxFactor:0}]},ut.simulations.electricity.ConfigurationManager=function(){function t(t,o,r){this.circuitBoardModel=t,this.circuitSimulatorEngine=o,this.logVerifierCircuitModel=r,this.loadConfiguration(e)}return t.prototype.load=function(e){},t.prototype.loadConfiguration=function(e){return this.loadMeters(e.availableMeters),this.loadPowerSupplies(e.availablePowerSupplies)},t.prototype.loadMeters=function(e){var t,o;return t=function(t){return function(){var o,r,i,l,a,u,n,c,s,p;for(n=-1,s=-1,p=-1,c=-1,o=function(e){switch(e.type){case"ampere":return++n,new ut.simulations.electricity.AmpereMeterModel("amp"+n,e.maxFactor,n,e.label);case"volt":return++s,new ut.simulations.electricity.VoltMeterModel("volt"+s,e.maxFactor,s,e.label);case"watt":return++p,new ut.simulations.electricity.WattMeterModel("watt"+p,e.maxFactor,p,e.label);case"ohm":return++c,new ut.simulations.electricity.OhmMeterModel("ohm"+c,e.maxFactor,c,e.label,t.circuitSimulatorEngine);default:return console.log("unknown meter type: "+JSON.stringify(e)),null}},u=[],r=0,l=e.length;l>r;r++)i=e[r],a=o(i),a&&u.push(a);return u}}(this),o=t(),console.log("loaded meters: "+o.length),this.circuitBoardModel.getAvailableMeters().replaceMeters(o),this.circuitSimulatorEngine.setMeters(o),this.logVerifierCircuitModel?this.logVerifierCircuitModel.getAvailableMeters().replaceMeters(t()):void 0},t.prototype.loadPowerSupplies=function(e){var t,o;return t=function(){var t,o,r,i,l,a,u;for(a=-1,t=function(e){switch(e.type){case"dcVoltageSource":if(++a,0===a)return new ut.simulations.electricity.DcPowerModel("dcVoltageSource"+a,"dcVoltageSource","V",e.voltage.value,e.voltage.minimum,e.voltage.maximum,e.voltage.step,e.label);throw new Error("Only one dcVoltageSource is allowed");default:return console.log("unknown power supply type type: "+JSON.stringify(e)),null}},l=[],o=0,i=e.length;i>o;o++)r=e[o],u=t(r),u&&l.push(u);return l},o=t(),console.log("loaded power supplies: "+o.length),this.circuitBoardModel.getAvailablePowerSupplies().replacePowerSupplies(o),this.logVerifierCircuitModel?this.logVerifierCircuitModel.getAvailablePowerSupplies().replacePowerSupplies(t()):void 0},t}()}).call(this);
//# sourceMappingURL=configurationManager.js.map
