"use strict";var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ut;!function(t){var e;!function(e){var r;!function(e){var r=t.commons.actionlogging.LoggingModelVerifier,o=t.commons.DataSource,i=t.commons.DataSourceColumnFactory,n=t.commons.DataSourceColumnDrop,c=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getRowValues=function(t){return[t.map(function(t){return t.getValue()})]},e}(o),u=new c,a=function(t){function e(e){t.call(this),this.circuitBoadModel=e}return __extends(e,t),e.prototype.getDataSource=function(t){return u},e.prototype.getDataSourceColumn=function(t){var e=this.circuitBoadModel.getAvailableMeters().getMeter(t);if(!e){var r=this.circuitBoadModel.powerSource;null!==r&&(t===r.voltage.getId()?e=r.voltage:t===r.frequency.getId()&&(e=r.frequency))}return e?e.getDataSourceColumn():(console.warn("failed to find data source column: "+t),null)},e}(i),l=function(t){function e(e){t.call(this),this.dataSourceColumn=e}return __extends(e,t),e.prototype.getDataSource=function(){return u},e.prototype.getDataSourceColumn=function(){return this.dataSourceColumn},e}(n);e.ElectricityLabDataSourceColumnDrop=l;var s=golab.common.resourceLoader,d=e.electricityLabDependencies.indexOf("dataViewerTool")>=0;e.circuitsimulator=angular.module("circuitLab",e.electricityLabDependencies),e.circuitsimulator.config(["$sceDelegateProvider",function(t){return t.resourceUrlWhitelist(["self",s.getBaseUrl()+"/**"])}]),e.circuitsimulator.factory("resourceLoader",function(){return golab.common.resourceLoader}),e.circuitsimulator.factory("environmentHandlers",function(){return e.environmentHandlers}),d?e.circuitsimulator.factory("circuitModel",["environmentHandlers","dataGraphModel","configurationModel",function(t,r,o){r.clear();var i=new e.CircuitBoardModel(t,r,o);return i}]):(e.circuitsimulator.factory("circuitModel",["environmentHandlers","configurationModel",function(t,r){var o=new e.CircuitBoardModel(t,null,r);return o}]),e.circuitsimulator.factory("dataSetModel",[function(){return null}])),e.circuitsimulator.factory("configurationModel",["environmentHandlers",function(t){var r=new e.CircuitLabConfigurationModel(t);return r}]),e.circuitsimulator.factory("meterDAO",["circuitModel",function(t){return t.getAvailableMeters()}]),e.circuitsimulator.factory("powerDAO",["circuitModel",function(t){return t.getAvailablePowerSupplies()}]),e.circuitsimulator.factory("componentDAO",["configurationModel",function(t){return t.getComponentDAO()}]),e.circuitsimulator.factory("circuitSimulatorEngine",["circuitModel",function(t){return new e.CircuitSimulator(t,(!1),(!1))}]),e.circuitsimulator.factory("labConfigurations",[function(){return window.electricityLabconfigurationStore}]),e.circuitsimulator.factory("fileStorage",[function(){return new t.commons.persistency.FileStorage}]),e.circuitsimulator.factory("actionLogger",["environmentHandlers",function(t){return t.circuit.actionLogger}]),e.circuitsimulator.factory("languageHandler",["environmentHandlers",function(t){return t.languageHandler}]),e.circuitsimulator.run(["$rootScope","actionLogger","errorHandler","circuitSimulatorEngine","circuitModel","configurationModel","dataSetModel",function(t,e,o,i,n,u,l){var d=t;d.resourceLoader=s,d.language=s.getDesiredLanguage(),d.size=82,d.completeSize=84,d.lightSize=30,d.configurationModel=u,d.electricityLabDataSourceColumnFactory=new a(n),d.circuitBoardModel=n,u.setCircuitSimulatorEngine(i),u.addCircuitBoardModel(n),u.reload(),null!=n.getDataGraphModel()&&n.getDataGraphModel().clear(),n.setCircuitSimulatorEngine(i),d.nrOfDigits=3,d.electricityLabDataSource=new c,"function"==typeof window.fixCircuitSimulatorLayout&&window.fixCircuitSimulatorLayout();var g=!0;if(g&&!s.isProductionVersion()){var f=new r(n);f.setErrorHandler(o),e.setLoggingTarget("consoleObject"),n.getActionLogger().setLoggingTarget("consoleObject"),n.addListener("powerSourceChanged",function(t){f.getVerifyModel().setPowerSource(t.createNewModel())})}return e.logApplicationStarted()}])}(r=e.electricity||(e.electricity={}))}(e=t.simulations||(t.simulations={}))}(ut||(ut={}));
//# sourceMappingURL=circuitSimulator.js.map
