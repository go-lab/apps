var ut;!function(e){var n;!function(e){var n;!function(e){"use strict";function n(n,c){return{restrict:"E",template:'\n<table class="editComponentResistance">\n    <tr>\n        <td width="5%">\n            <component class="componentView" ng-repeat="component in properties.components"></component>\n        </td>\n        <td align="center">\n            <span class="valueInput">\n               <input type="text" ng-model="properties.value" awnum num-int="3", num-fract="1" num-neg="false" ng-blur="newNumber()" ng-enter="enterKey()" size="'+o+'" class="displayInput">\n               <select ng-model="properties.factor" ng-change="factorChanged()">\n                 <option ng-repeat="option in properties.factorOptions" value="{{option.display}}">{{option.display}}</option>\n               </select>\n               {{ properties.unit }}\n            </span>\n        </td>\n    </tr>\n</table>\n',replace:!1,link:function(i,s,a){var r=i;r.postionComponents=!1;var l={factorOptions:e.smallFactorOptions,components:[],value:"0",factor:"",unit:""};r.properties=l;var p=!1,u=function(){t&&console.log("start editing of "+r.selectedComponent.getId()),p=!0,l.components.length=0,l.components.push(r.selectedComponent);var n=e.numberToValueAndFactor(r.selectedComponent.getResistance()),c=n[0],i=n[1];switch(l.value=c.toPrecision(o),l.factor=i,r.selectedComponent.getComponentType()){case"capacitor":l.unit="F";break;case"coil":l.unit="H";break;default:console.warn("unsupported component type: "+r.selectedComponent.getComponentType()),l.unit="???"}},m=function(){var o=e.valueAndFactorToNumber(parseFloat(l.value),l.factor);r.selectedComponent.getResistance()!==o&&(r.selectedComponent.setResistance(o),n.getCircuitSimulatorActionLogger().logComponentChange(r.selectedComponent),r.userChangedResistanceValue(),t&&console.log("changed resistance of "+r.selectedComponent.getId()+" to "+o))},d=function(){r.selectedComponent&&(p&&m(),l.components.length=0,p=!1,t&&console.log("stopped editing of "+r.selectedComponent.getId()))};r.newNumber=function(){p&&(t&&console.log("new value: "+l.value),m())},r.enterKey=function(){p&&(t&&console.log("enterkey"),c(function(){r.enterInEditResistanceDialog()}))},r.factorChanged=function(){p&&(t&&console.log("new factor: "+l.factor),m())},i.$watch("dialogBoxChangeCounter",function(){s.is(":visible")&&r.selectedComponent?u():d()})}}}var t=!1,o=4;e.circuitsimulator.directive("editComponentResistance".toLowerCase(),["circuitModel","$timeout",n])}(n=e.electricity||(e.electricity={}))}(n=e.simulations||(e.simulations={}))}(ut||(ut={}));
//# sourceMappingURL=editComponentResistance.js.map
