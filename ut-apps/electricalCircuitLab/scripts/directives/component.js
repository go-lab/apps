(function(){"use strict";var t,n,o;window.ut=window.ut||{},ut.simulations=ut.simulations||{},ut.simulations.electricity=ut.simulations.electricity||{},ut.commons=ut.commons||{},ut.commons.utils=ut.commons.utils||{},o={component:null,commonsPath:"",$parent:null},n=golab.common.resourceLoader.getRootUrl()+"/images/",t=function(t,o){return{restrict:"E",template:'<div class="componentWrapper">\n  <table class=\'component rotate{{component.rotation}}\'\n         ng-class="{componentSelected:component.selected}" border=\'0\' background="{{imageUrl}}">\n    <tr>\n      <td class="valueCell"><span class="componentValue topValue">{{topValue}}</span></td>\n    </tr>\n    <tr>\n      <td class=\'colorBands\'>\n        <span ng-show=\'component.isResistor() && configurationModel.showResistorColorBars\'>\n          <colorBandDisplay resistance="{{component.getResistance()}}"></colorBandDisplay>\n        </span>\n      </td>\n    </tr>\n    <tr>\n      <td class="valueCell bottomValueCell"><span class="componentValue">{{bottomValue}}</span></td>\n    </tr>\n  </table>\n  <span class="componentLabel" ng-show="showLabel">{{ component.getXPos() }}-{{ component.getYPos() }}</span>\n  <span ng-show="showLightEffect" style="position: absolute; top: 0px; left: 0px;">\n    <componentLightBulbLight lightColor="{{lightColor}}" size="{{lightSize}}"></componentLightBulbLight>\n  </span>\n</div>',replace:!0,scope:!0,link:function(e,c,i){var a,r,s,l,u,p,g,m;return a=o.getCircuitSimulatorActionLogger(),s=function(t,n){var o;return o=t.toLowerCase(),i[o]?i[o]:n},e.lightColor=s("lightColor","#FFFF00"),e.showLabel=!0,null!=i.hidelabel&&(e.showLabel=!1),e.showLightEffect=!1,m=function(){return e.showLightEffect=e.component.isLight()&&t.showLightEffect},m(),e.postionComponents&&(c.css("position","absolute"),r=c.children(":last"),r.addClass("componentLabelPositioned"),e.$watch("component.placeCounter",function(){var t,n;return n=c.parent().offset(),t={left:n.left+e.component.getXPos()*e.completeSize,top:n.top+e.component.getYPos()*e.completeSize},c.offset(t)})),l=function(){return t.showLightEffect},e.component.setAllowBurnThroughLightFunction(l),u=function(){var o;return o=e.component.definition.image,t.acMode&&"dcVoltageSource"===o&&(o="acVoltageSource"),e.imageUrl=""+n+t.imageSet+"/"+o+".png"},u(),e.$watch("component.getComponentType()",function(){return u()}),e.$watch("configurationModel.acMode",function(){return u()}),e.$watch("configurationModel.imageSet",function(){return u(),m()}),e.$watch("configurationModel.showLightEffect",function(){var t;if(m(),e.component.isLight())return null!=(t=e.component.getSensor())?t.checkForOverloadAction():void 0}),e.topValue="",e.bottomValue="",p=function(){return e.topValue=function(){if(!t.showResistorValue)return"";switch(e.component.getComponentType()){case"resistor":return ut.simulations.electricity.valueToShortcut(e.component.getResistance());case"capacitor":return ut.simulations.electricity.calculateImpedanceDisplayString(e.component.getResistance())+"F";case"coil":return ut.simulations.electricity.calculateImpedanceDisplayString(e.component.getResistance())+"H";default:return""}}()},e.component.hasImpedance()&&e.$watch("component.getResistance()",function(t){return p()}),g=function(){var n,o,c;return o=e.component.getResistance(),c=e.component.getTheVoltage(),n=c*c/o,e.topValue=t.showLightBulbPowerValue?n+" W":"",e.bottomValue=t.showLightBulbVoltageValue?c+" V":""},e.component.isLight()&&(e.$watch("component.getResistance()",function(){return g()}),e.$watch("component.getTheVoltage()",function(){return g()}),e.component.setComponentChangedReporter(function(){return a.logComponentChange(e.component),e.componentChanged(),e.$apply()})),t.addListener("modelChanged",function(){return e.component.isLight()?g():e.component.hasImpedance()?p():void 0}),e.objectDraggingStarted=function(t,n){var o;return c.addClass("componentBeingDragged"),"function"==typeof(o=e.$parent).objectDraggingStarted?o.objectDraggingStarted(t,n):void 0},e.objectDraggingStopped=function(t,n){var o;return c.removeClass("componentBeingDragged"),"function"==typeof(o=e.$parent).objectDraggingStopped?o.objectDraggingStopped(t,n):void 0},e.getDragAndDropTransferObject=function(t,n){return e.component.getDataSourceColumn()?new ut.simulations.electricity.ElectricityLabDataSourceColumnDrop(e.component.getDataSourceColumn()):null}}}},window.ut.simulations.electricity.circuitsimulator.directive("component",["configurationModel","circuitModel",t])}).call(this);
//# sourceMappingURL=component.js.map
