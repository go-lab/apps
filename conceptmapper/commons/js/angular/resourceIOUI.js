(function(){"use strict";var e,t,o,n,r,i,s;window.ut=window.ut||{},ut.commons=ut.commons||{},e=window.angular,t={objectType:null,loadResource:null,storageHandler:null},s=function(){return{restrict:"E",template:'<span ng-show="showSorted">\n   <i class="fa fa-sort-asc fa-fw fontAweSomeButtonSmall" ng-show="!sort.descending"></i>\n   <i class="fa fa-sort-desc fa-fw fontAweSomeButtonSmall" ng-show="sort.descending"></i>\n</span>',replace:!0,scope:!0,link:function(e,t,o){var n;return n=o.column,e.$watch("sort.column",function(t){return e.showSorted=n===t})}}},ut.commons.golabUtils.directive("sortedDirection".toLowerCase(),[s]),i=function(e){return{restrict:"E",template:'<table class="resourceTable">\n  <tbody>\n    <tr class="resourceTableHeader">\n      <th ng-click="changeSorting(\'title\')">\n        {{ titleLabel | i_g4i18n}} <sortedDirection column="title"></sortedDirection>\n      </th>\n      <th ng-click="changeSorting(\'type\')" ng-if="showType">\n        {{ typeLabel | i_g4i18n}} <sortedDirection column="type"></sortedDirection>\n      </th>\n      <th ng-click="changeSorting(\'tool\')">\n        {{ toolLabel | i_g4i18n}} <sortedDirection column="tool"></sortedDirection>\n      </th>\n      <th ng-click="changeSorting(\'author\')" ng-if="showAuthor">\n        {{ authorLabel | i_g4i18n}} <sortedDirection column="author"></sortedDirection>\n      </th>\n      <th ng-click="changeSorting(\'modified\')">\n        {{ dateLabel | i_g4i18n}} <sortedDirection column="modified"></sortedDirection>\n      </th>\n    </tr>\n    <tr ng-repeat="resourceDescription in resourceDescriptions | orderBy:sort.column:sort.descending"\n        class="resourceTableRow" ng-class="{resourceTableRowSelected:isSelected(resourceDescription.id)}"\n        ng-click="resourceSelected(resourceDescription.id, resourceDescription.title)"\n        ng-dblclick="loadResourceDirect(resourceDescription.id, resourceDescription.title)">\n      <td>{{resourceDescription.title}}</td>\n      <td class="noWrap" ng-if="showType">{{"resources.type.name." + resourceDescription.type | g4i18n}}</td>\n      <td class="noWrap">{{"tools.name." + resourceDescription.tool | g4i18n}}</td>\n      <td class="noWrap" ng-if="showAuthor">{{resourceDescription.author}}</td>\n      <td class="noWrap">{{resourceDescription.modified | date:"dd MMM yy, H:mm:ss "}}</td>\n    </tr>\n  </tbody>\n</table>',replace:!0,scope:!0,link:function(t,o,n){return t.hideContent="true"===n.hidecontent,e(function(){if(!t.sort)return t.sort={column:"title",descending:!1}},0),t.changeSorting=function(e){return t.sort.column===e?t.sort.descending=!t.sort.descending:(t.sort.column=e,t.sort.descending=!1)}}}},ut.commons.golabUtils.directive("resourcesList".toLowerCase(),["$timeout",i]),r=function(e){return{restrict:"E",template:'<div style="relative">\n  <div class="resourceTableContent">\n    <resourcesList></resourcesList>\n  </div>\n  <div class="resourceTableHeader">\n    <resourcesList hideContent="true"></resourcesList>\n  </div>\n  <div class="pleaseWaitIcon" style="display: block" ng-show="retrievingResourceList"></div>\n  <div class="dialogButtonRow">\n    <ul class="toolbar">\n      <li>\n         <i class="fa fa-refresh fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'reload()\'\n          title="{{reloadTitle}}"></i>\n      </li>\n      <li>\n         <i class="fa fa-play fa-fw activeButton fontAweSomeButton dialogButton"\n          ng-class="{disabledButton: selectedResourceId==\'\'}" ng-click=\'load()\' title="{{loadTitle}}"></i>\n      </li>\n      <li>\n         <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'cancel()\'\n           title="{{cancelTitle}}"></i>\n      </li>\n    </ul>\n  </div>\n</div>',replace:!0,link:function(t,o,n){var r,i,s,a;return i="",n.g4i18nbasekey&&(i=n.g4i18nbasekey),i?(t.titleLabel="i_"+i+".title",t.typeLabel="i_"+i+".type",t.toolLabel="i_"+i+".tool",t.authorLabel="i_"+i+".author",t.dateLabel="i_"+i+".date"):(t.titleLabel="title",t.typeLabel="type",t.toolLabel="tool",t.authorLabel="author",t.dateLabel="date"),r=function(){var e;return e="",n.resourcetype&&(e=n.resourcetype),e},t.reloadTitle=e.getMessage("loadSave.loadDialog.update"),t.loadTitle=e.getMessage("loadSave.loadDialog.loadSelected",""),t.cancelTitle=e.getMessage("loadSave.loadDialog.cancel"),t.elem=o,t.retrievingResourceList=!1,t.resourceDescriptions=[],t.selectedResourceId="",t.sort={column:"title",descending:!1},s=function(e){var o,n,i;return i=r(),t.resourceDescriptions=function(){var r;r=[];for(o in e)n=e[o],r.push(t.storageHandler.getResourceDescription(n));return r}(),t.retrievingResourceList=!1,t.$apply()},a=function(){return t.retrievingResourceList=!0,t.storageHandler.listResourceMetaDatas(function(e,o){return e?(alert("Problems with getting the list of resources:\n"+e),t.retrievingResourceList=!1):s(o)})},t.$watch("dialogBoxChangeCounter",function(){if(o.is(":visible"))return a()}),t.reload=function(){return a()},t.load=function(){if(t.selectedResourceId&&t.loadResource)return t.storageHandler.readResource(t.selectedResourceId,function(e,o){return e?alert("Problems with reading the resource, with id "+t.selectedResourceId+":\n"+e):o?t.loadResource(o):void 0})},t.isSelected=function(e){return t.selectedResourceId===e},t.resourceSelected=function(e){return t.selectedResourceId=e},t.loadResourceDirect=function(e){return t.selectedResourceId=e,t.load()}}}},ut.commons.golabUtils.directive("resourceSelection".toLowerCase(),["languageHandler",r]),n=0,o=function(e){return{restrict:"E",template:'<div style="relative">\n  <div class="resourceTableContent">\n    <resourcesList></resourcesList>\n  </div>\n  <div class="resourceTableHeader">\n    <resourcesList hideContent="true"></resourcesList>\n  </div>\n  <div class="pleaseWaitIcon" style="display: block" ng-show="retrievingResourceList"></div>\n  <input ng-model="resource.name" ng-enter="save()"class="questionInput"/>\n  <div class="dialogButtonRow">\n    <ul class="toolbar">\n      <li>\n         <i class="fa fa-refresh fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'reload()\'\n          title="{{reloadTitle}}"></i>\n      </li>\n      <li>\n         <i class="fa fa-play fa-fw activeButton fontAweSomeButton dialogButton"\n          ng-class="{disabledButton: resource.name==\'\'}" ng-click=\'save()\' title="{{saveTitle}}"></i>\n      </li>\n      <li>\n         <i class="fa fa-times fa-fw activeButton fontAweSomeButton dialogButton" ng-click=\'cancel()\'\n           title="{{cancelTitle}}"></i>\n      </li>\n    </ul>\n  </div>\n  <dialogBox id="{{replaceDialogId}}" title="{{replaceDialogTitle}}" icon=\'warning\' resizable="false" width="400">\n    <askQuestion ok="i_loadSave.replaceResourceDialog.replace" cancel="i_loadSave.replaceResourceDialog.cancel"></askQuestion>\n  </dialogBox>\n</div>',replace:!0,link:function(t,o,r){var i,s,a,l,c,u;return a=n++,l="replaceDialogBox"+a,t.replaceDialogId=l,s="",r.g4i18nbasekey&&(s=r.g4i18nbasekey),s?(t.titleLabel="i_"+s+".title",t.typeLabel="i_"+s+".type",t.toolLabel="i_"+s+".tool",t.authorLabel="i_"+s+".author",t.dateLabel="i_"+s+".date"):(t.titleLabel="title",t.typeLabel="type",t.toolLabel="tool",t.authorLabel="author",t.dateLabel="date"),i=function(){var e;return e="",r.resourcetype&&(e=r.resourcetype),e},t.reloadTitle=e.getMessage("loadSave.loadDialog.update"),t.saveTitle=e.getMessage("loadSave.saveDialog.saveResource",""),t.cancelTitle=e.getMessage("loadSave.loadDialog.cancel"),t.replaceDialogTitle=e.getMessage("loadSave.replaceResourceDialog.dialogTitle"),t.elem=o,t.retrievingResourceList=!1,t.resourceDescriptions=[],t.selectedResourceId="",t.sort={column:"title",descending:!1},c=function(o){var n,r;return r=i(),t.resourceDescriptions=function(){var e;e=[];for(a in o)n=o[a],e.push(t.storageHandler.getResourceDescription(n));return e}(),t.retrievingResourceList=!1,t.loadTitle=e.getMessage("loadSave.loadDialog.loadSelected",r),t.$apply()},u=function(e){return t.retrievingResourceList=!0,t.storageHandler.listResourceMetaDatas(function(o,n){return o?(alert("Problems with getting the list of resources:\n"+o),t.retrievingResourceList=!1):(c(n),e?e(n):void 0)})},t.$watch("dialogBoxChangeCounter",function(){if(o.is(":visible"))return u()}),t.reload=function(){return u()},t.save=function(){var o;if(o=t.resource.name?o=t.resource.name.trim():"",t.saveAs&&o)return u(function(n){var r,i,s;i=null,s=o.toLowerCase();for(a in n)r=n[a],r.metadata.target.displayName.toLowerCase()===s&&(i=r.metadata);return i?(t.askQuestion.questionParams={question:e.getMessage("loadSave.replaceResourceDialog.question",i.target.displayName),answer:null,dialogBoxId:l,questionOkAnswer:function(){return t.saveAs(o,i)}},t.dialogBoxes[l].show()):t.saveAs(o,null)})},t.resourceSelected=function(e,o){return t.selectedResourceId=e,t.resource.name=o},t.loadResourceDirect=function(e,t){}}}},ut.commons.golabUtils.directive("resourceName".toLowerCase(),["languageHandler",o])}).call(this);
//# sourceMappingURL=resourceIOUI.js.map
