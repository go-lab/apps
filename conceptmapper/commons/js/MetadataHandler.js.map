{"version":3,"sources":["MetadataHandler.coffee"],"names":["bind","fn","me","apply","arguments","window","golab","ils","metadata","context","graasp","preview","direct","standalone","unknown","MetadataHandler","cb","this","_debug","console","log","_context","identifyContext","_metadata","JSON","parse","stringify","setTimeout","_this","generator","displayName","getContext","generateUUID","d","uuid","Date","getTime","replace","char","r","Math","random","floor","toString","contextURLParameter","ilsContext","previewUrlParameter","getParameterFromUrl","toLowerCase","warn","key","i","len","parameter","part","partParts","parts","queryPart","location","search","trim","substring","split","length","decodeURIComponent","setId","newId","id","getId","setMetadata","newMetadata","getMetadata","setActor","newActor","actor","getActor","getTarget","target","setTarget","newTarget","getGenerator","getProvider","provider","getTargetDisplayName","setTargetDisplayName","newName","getTargetId","setTargetId","getPublished","published","setMetadataFlag","flag","value","flags","getMetadataFlag","getILSStructure","callback","getIls","ilsStructure","error","detail","url","profileUrl","phases","apps","getItemsBySpaceId","deferredPhaseReads","index","phase","phaseReadPromise","type","phaseIndex","deferred","$","Deferred","getAppsBySpaceId","app","appIndex","appInfo","appList","configuration","exception","fail","appUrl","itemType","appType","settings","content","error1","push","visibilityLevel","resolve","promise","spaceType","when","done","filter","updateIdsAfterImporting","GoLabMetadataHandler","superClass","osapi","getAppContextParameters","objectType","contextualActor","inquiryPhase","inquiryPhaseId","inquiryPhaseName","ilsHasAngeLA","ilsHasAngeLO","href","gadgets","util","getUrlParameters","storageId","storageType","__super__","constructor","call","LocalMetadataHandler","actorId","getIdentifyingUrl","removeQueryAndFragmentFromUrl","userNickname","windowTitle","path","subPaths","pathname","toLocaleLowerCase","protocol","host","document","title","localStorage","getItem","prompt","setItem","removePart","urlString","character","lastIndex","lastIndexOf","substr"],"mappings":"CAAA,WA0EA,YA1EA,IAAAA,GAAA,SAAAC,EAAAC,GAAA,MAAA,YAAA,MAAAD,GAAAE,MAAAD,EAAAE,oMA4EAC,QAAOC,MAAQD,OAAOC,UACtBD,OAAOC,MAAMC,IAAMF,OAAOC,MAAMC,QAChCF,OAAOC,MAAMC,IAAIC,SAAWH,OAAOC,MAAMC,IAAIC,aAE7CH,OAAOC,MAAMC,IAAIE,QAAUJ,OAAOC,MAAMC,IAAIE,YAG5CJ,OAAOC,MAAMC,IAAIE,QAAQC,OAAS,SAElCL,OAAOC,MAAMC,IAAIE,QAAQF,IAAM,MAE/BF,OAAOC,MAAMC,IAAIE,QAAQE,QAAU,UAEnCN,OAAOC,MAAMC,IAAIE,QAAQG,OAAS,SAElCP,OAAOC,MAAMC,IAAIE,QAAQI,WAAa,aAEtCR,OAAOC,MAAMC,IAAIE,QAAQK,QAAU,UAE7BT,OAAOC,MAAMC,IAAIC,SAASO,gBAAA,WACjB,QAAAA,GAACP,EAAUQ,GAMtB,+IALAC,KAACC,QAAS,EAEPD,KAACC,QAAYC,QAAQC,IAAI,iCAE5BH,KAACI,SAAWJ,KAACI,UAAYJ,KAACK,mBACvBd,EAID,KAAM,mEAFNS,MAACM,UAAYC,KAAKC,MAAMD,KAAKE,UAAUlB,IAIzCmB,WAAW,SAAAC,SAAA,YACT,GAAeZ,QAAfA,GAAG,KAAMY,KADAX,MAET,GACCA,KAACC,SACFC,QAAQC,IAAI,oCAAoCH,KAACM,UAAUM,UAAUC,YAAY,4CACjFX,QAAQC,IAAIH,KAACM,WACbJ,QAAQC,IAAI,YAAYH,KAACc,kCAG7BC,aAAc,WACZ,GAAAC,GAAAC,CAQA,OARAD,IAAQ,GAAAE,OAAOC,UACfF,EAAO,uCAAuCG,QAAQ,QAAS,SAACC,GAC9D,GAAAC,EAEA,OAFAA,IAAKN,EAAoB,GAAhBO,KAAKC,UAAiB,GAAK,EACpCR,EAAIO,KAAKE,MAAMT,EAAI,IACR,MAARK,EACMC,EAAEI,SAAS,KAEN,EAAJJ,EAAU,GAAKI,SAAS,mBAGtCrB,gBAAiB,WACf,GAAAsB,GAAAC,EAAAC,CAEA,IAFA7B,KAACI,SAAW,KACZuB,EAAsB3B,KAAC8B,oBAAoB,WACxC,MAAAH,EACD,OAAOA,EAAoBI,eAA3B,IACO3C,QAAOC,MAAMC,IAAIE,QAAQC,OADhC,IACwCL,QAAOC,MAAMC,IAAIE,QAAQF,IADjE,IACsEF,QAAOC,MAAMC,IAAIE,QAAQE,QAD/F,IACwGN,QAAOC,MAAMC,IAAIE,QAAQG,OADjI,IACyIP,QAAOC,MAAMC,IAAIE,QAAQI,WADlK,IAC8KR,QAAOC,MAAMC,IAAIE,QAAQK,QACnMG,KAACI,SAAWuB,EAAoBI,aAD0I,MAD9K,SAII7B,QAAQ8B,KAAK,wCAAwCL,OAEzDE,GAAsB7B,KAAC8B,oBAAoB,WAChB,KAAvBD,IACF7B,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQE,QACzC,KAAKM,KAACI,SAOJ,OANAwB,EAAatC,IAAIe,kBACdL,KAACC,SACFC,QAAQC,IAAI,oEACZD,QAAQC,IAAIyB,IAGPA,GAAP,IACO,SAAc5B,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQC,MAAnD,MADP,KAEO,UAAeO,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQE,OAApD,MAFP,KAGO,iBAAsBM,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQF,GAA3D,MAHP,KAIO,kBAAuBU,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQI,UAA5D,MAJP,SAMII,KAACI,SAAWhB,OAAOC,MAAMC,IAAIE,QAAQK,QAC3C,GAAGG,KAACC,aACFC,SAAQC,IAAI,uBACZD,QAAQC,IAAIH,KAACI,uBAEjBU,WAAY,iBACVd,MAACI,sBAEH0B,oBAAqB,SAACG,GACpB,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAGA,IAHAP,EAAMA,EAAIF,cACVK,EAAY,KACZI,EAAYC,SAASC,OAAOC,OAAOZ,cAC/BS,GAA6B,MAAhBA,EAAU,GAEzB,IADAD,EAAQC,EAAUI,UAAU,GAAGC,MAAM,KACrCX,EAAA,EAAAC,EAAAI,EAAAO,OAAAZ,EAAAC,EAAAD,WACEI,EAAYD,EAAKQ,MAAM,KACnBN,EAAMO,QAAUR,EAAU,KAAML,IACV,IAApBK,EAAUQ,OACZV,EAAYE,EAAU,GACK,IAApBA,EAAUQ,SACjBV,EAAY,IACpB,OAAG,OAAAA,EACMW,mBAAmBX,GAEnB,kBAEXY,MAAO,SAACC,SACNjD,MAACM,UAAU4C,GAAKD,EAChBjD,kBAEFmD,MAAO,iBACLnD,MAACM,UAAU4C,gBAEbE,YAAa,SAACC,SAEZrD,MAACM,UAAYC,KAAKC,MAAMD,KAAKE,UAAU4C,IACvCrD,kBAEFsD,YAAa,iBACXtD,MAACM,uBAEHiD,SAAU,SAACC,SACTxD,MAACM,UAAUmD,MAAQD,eAErBE,SAAU,iBACR1D,MAACM,UAAUmD,mBAEbE,UAAW,iBACT3D,MAACM,UAAUsD,oBAEbC,UAAW,SAACC,SACV9D,MAACM,UAAUsD,OAASrD,KAAKC,MAAMD,KAAKE,UAAUqD,iBAEhDC,aAAc,iBACZ/D,MAACM,UAAUM,uBAEboD,YAAa,iBACXhE,MAACM,UAAU2D,sBAEbC,qBAAsB,iBACpBlE,MAACM,UAAUsD,OAAO/C,yBAEpBsD,qBAAsB,SAACC,SACrBpE,MAACM,UAAUsD,OAAO/C,YAAcuD,eAElCC,YAAa,iBACXrE,MAACM,UAAUsD,OAAOV,gBAEpBoB,YAAa,SAACrB,SACZjD,MAACM,UAAUsD,OAAOV,GAAKD,eAEzBsB,aAAc,iBACZvE,MAACM,UAAUkE,uBAEbC,gBAAiB,SAACC,EAAMC,SACtB3E,MAACM,UAAUsE,MAAQ5E,KAACM,UAAUsE,UAC9B5E,KAACM,UAAUsE,MAAMF,GAAQC,eAE3BE,gBAAiB,SAACH,SAChB1E,MAACM,UAAUsE,MAAQ5E,KAACM,UAAUsE,UAC9B5E,KAACM,UAAUsE,MAAMF,gBAEnBI,gBAAiB,SAACC,GAChB,MAAG,OAAA3F,OAAAE,IAEDF,OAAOE,IAAI0F,OAAO,SAAArE,SAAA,UAACrB,GACjB,GAAA2F,EAAA,OAAG,OAAA3F,EAAA4F,MACDH,GAAUG,MAAO,+CAAgDC,OAAQ7F,EAAI4F,OAAQ,OAGrFD,KACAA,EAAa/B,GAAK5D,EAAI4D,GACtB+B,EAAaG,IAAM9F,EAAI+F,WACvBJ,EAAapE,YAAcvB,EAAIuB,YAC/BoE,EAAaK,UACbL,EAAaM,QAEbnG,OAAOE,IAAIkG,kBAAkBlG,EAAI4D,GAAI,SAACoC,GACpC,GAAAG,GAAAvD,EAAAwD,EAAAvD,EAAAwD,EAAAC,EAAAC,CAAA,IAAG,MAAAP,EAAAJ,YACDH,IAAUG,MAAO,0DAA2DC,OAAQG,EAAOJ,OAAQ,KAmDnG,KA9CAU,EAAmB,SAAAjF,SAAA,UAACgF,EAAOG,GAEzB,GAAAC,EAwCA,OAxCAA,GAAe,GAAAC,GAAEC,SACjB7G,OAAOE,IAAI4G,iBAAiBP,EAAMzC,GAAI,SAACqC,GACrC,GAAAY,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAtE,EAAAC,CAAA,IAAG,MAAAoD,EAAAL,YACDa,GAASU,MAGT,KADAH,KACAF,EAAAlE,EAAA,EAAAC,EAAAoD,EAAAzC,OAAAZ,EAAAC,EAAAiE,IAAAlE,EAAA,CAQE,UAPAmE,GACEnD,GAAIiD,EAAIjD,GACRrC,YAAasF,EAAItF,YACjBuE,IAAKe,EAAIO,OACTC,SAAUR,EAAIQ,SACdC,QAAST,EAAIS,SAEXT,EAAI5G,UAAY4G,EAAI5G,SAASsH,SAC/B,IACEN,GACEhH,UACEkE,MAAO0C,EAAI5G,SAASsH,SAASpD,MAC7BG,OAAQuC,EAAI5G,SAASsH,SAASjD,OAC9BV,GAAIiD,EAAI5G,SAASsH,SAAS3D,GAC1BsB,UAAW2B,EAAI5G,SAASsH,SAASrC,WAGnCsC,QAASvG,KAAKC,MAAM2F,EAAI5G,SAASsH,SAASC,UAE5CT,EAAQE,cAAgBA,EAX1B,MAAAQ,GAYMP,EAAAO,EACJ7G,QAAQ8B,KAAK,6FACb9B,QAAQ8B,KAAKwE,GACbtG,QAAQ8B,KAAKmE,GACjBG,EAAQU,KAAKX,SACfpB,GAAaK,OAAOQ,IAClB5C,GAAIyC,EAAMzC,GACV2C,KAAMF,EAAMpG,SAASsG,KACrBhF,YAAa8E,EAAM9E,YACnBoG,gBAAiBtB,EAAMsB,gBACvB1B,KAAMe,GAERP,EAASmB,YACNnB,EAASoB,YA1CCnH,MA6CnByF,KACAC,EAAAxD,EAAA,EAAAC,EAAAmD,EAAAxC,OAAAZ,EAAAC,EAAAuD,IAAAxD,SACK,MAAAyD,EAAApG,SACDsG,EAAOF,EAAMpG,SAASsG,MAEtBA,EAAO,eACPF,EAAMpG,YACNoG,EAAMpG,SAASsG,KAAO,gBACb,UAARA,GAA2B,UAARA,IAGD,gBAAlBF,EAAMgB,SAIa,WAAnBhB,EAAMyB,UAITlH,QAAQ8B,KAAK,wDAFXyD,EAAmBuB,KAAKpB,EAAiBD,EAAOD,IAJhDT,EAAaM,KAAKyB,KAAKrB,UAQ3BK,GAAEqB,KAAKnI,MAAM8G,EAAGP,GAAoB6B,KAAK,iBAGvCrC,GAAaK,OAASL,EAAaK,OAAOiC,OAAO,SAAC5B,SAAyB,mBAATA,KAClEZ,EAAS,KAAME,KACjBe,EAAEqB,KAAKnI,MAAM8G,EAAGP,GAAoBgB,KAAK,iBACvC1B,IAAUG,MAAO,6DAA8D,aA3FvElF,OA6FlB+E,GAAUG,MAAO,sDAAuD,mBAE5EsC,wBAAyB,iBACvBxH,MAACgD,MAAMhD,KAACe,gBACRf,KAACsE,YAAYtE,KAACe,sBAGZ3B,OAAOC,MAAMC,IAAIC,SAASkI,qBAAA,SAAAC,GAEjB,QAAAD,GAAClI,EAAUQ,GACtB,GAAAmF,EACA,IADAlF,KAACK,kBACE,mBAAAsH,QAAA,OAAAA,MAED,IACE,IAAOrI,IACL,KAAM,0EACRA,KAAIsI,wBAAwB,SAAAjH,SAAA,UAACnB,SACvBmB,GAACV,SACHC,QAAQC,IAAI,mDACZD,QAAQC,IAAIX,IAEdD,EAASkE,MAAM5C,YAAcrB,EAAQiE,MAAM5C,YAC3CtB,EAASkE,MAAMP,GAAK1D,EAAQiE,MAAMP,GAClC3D,EAASkE,MAAMoE,WAAarI,EAAQiE,MAAMoE,WAEvC,MAAArI,EAAAsI,kBACDvI,EAASuI,gBAAkBtI,EAAQsI,iBAErCvI,EAAS0E,SAASpD,YAAcrB,EAAQyE,SAASpD,YACjDtB,EAAS0E,SAASf,GAAK1D,EAAQyE,SAASf,GACxC3D,EAAS0E,SAAS4D,WAAarI,EAAQyE,SAAS4D,WAChDtI,EAAS0E,SAAS8D,aAAevI,EAAQyE,SAAS8D,aAClDxI,EAAS0E,SAAS+D,eAAiBxI,EAAQyE,SAAS+D,eACpDzI,EAAS0E,SAASgE,iBAAmBzI,EAAQyE,SAASgE,iBACtD1I,EAAS0E,SAASmB,IAAM5F,EAAQyE,SAASmB,IACtC,MAAA5F,EAAAyE,SAAAiE,aACD3I,EAAS0E,SAASiE,aAAe1I,EAAQyE,SAASiE,aAElD3I,EAAS0E,SAASiE,cAAe,EAChC,MAAA1I,EAAAyE,SAAAkE,eACD5I,EAAS0E,SAASkE,aAAe3I,EAAQyE,SAASkE,cAEpD5I,EAAS0E,SAASkE,cAAe,EAGP,SAAvB3I,EAAQyE,SAASf,IAA0C,YAAvB1D,EAAQyE,SAASf,IAElDvC,EAACV,QACHC,QAAQC,IAAI,oCACdZ,EAAS0E,SAAS4D,WAAa,UAC/BtI,EAAS0E,SAASf,GAAK,UACvB3D,EAAS0E,SAASpD,YAAc,UAChCtB,EAAS0E,SAASmB,IAAMhG,OAAOqD,SAAS2F,KACxC7I,EAASqB,UAAUwE,IAAMiD,QAAQC,KAAKC,mBAAmBnD,IACzD7F,EAAS0E,SAAS8D,aAAe,OACjCxI,EAAS0E,SAAS+D,eAAiB,OACnCzI,EAAS0E,SAASgE,iBAAmB,QACI,SAAnCzI,EAAQyE,SAAS+D,gBAAkE,YAAnCxI,EAAQyE,SAAS+D,gBAEnErH,EAACV,QACHC,QAAQC,IAAI,2CACdZ,EAAS0E,SAAS8D,aAAe,MACjCxI,EAAS0E,SAAS+D,eAAiB,OACnCzI,EAAS0E,SAASgE,iBAAmB,OACrC1I,EAASqB,UAAUC,YAActB,EAAS0E,SAASpD,YACnDtB,EAASqB,UAAUsC,GAAK3D,EAAS0E,SAASf,GAC1C3D,EAASqB,UAAUiH,WAAa,MAChCtI,EAASqB,UAAUwE,IAAM7F,EAAS0E,SAASmB,MAEvCzE,EAACV,QACHC,QAAQC,IAAI,wCACdZ,EAASqB,UAAUsC,GAAK1D,EAAQoB,UAAUsC,GAC1C3D,EAASqB,UAAUiH,WAAarI,EAAQoB,UAAUiH,WAClDtI,EAASqB,UAAUwE,IAAM5F,EAAQoB,UAAUwE,KAG7C7F,EAASiJ,UAAYhJ,EAAQgJ,UAC7BjJ,EAASkJ,YAAcjJ,EAAQiJ,YAE/BhB,EAAAiB,UAAAC,YAAAC,KAAAjI,EAAMpB,GACNQ,EAAG,KAAMY,KAhEiBX,OAH9B,MAAA+G,GAoEM7B,EAAA6B,EACJ7G,QAAQ8B,KAAK,oCACb9B,QAAQ8B,KAAKkD,GACbhF,QAAQC,IAAI,oBACZD,QAAQC,IAAIZ,OAEXS,MAACC,QAAYC,QAAQC,IAAI,oDAC5BsH,EAAAiB,UAAAC,YAAAC,KAAA5I,KAAMT,GACNQ,EAAG,KAAMC,uBAlF8CZ,OAAOC,MAAMC,IAAIC,SAASO,iBAoFjFV,OAAOC,MAAMC,IAAIC,SAASsJ,qBAAA,SAAAnB,GAEjB,QAAAmB,GAACtJ,EAAUQ,GACtB,GAAA+I,GAAAC,EAAAC,EAAAC,EAAAC,CAoCA,IApCAlJ,KAACK,kBACD0I,EAAoB,WAClB,GAAAI,GAAAC,CAEA,IAFAD,EAAO/J,OAAOqD,SAAS4G,SACvBD,EAAWhK,OAAOqD,SAAS4G,SAASxG,MAAM,KACtCuG,EAAStG,OAAS,EACpB,OAAOsG,EAAS,GAAGE,qBAAnB,IACO,aACHH,EAAOC,EAAS,EADb,MADP,KAGO,cACHD,EAAOC,EAAS,GACbA,EAAStG,OAAS,IACnBqG,GAAQ,IAAMC,EAAS,GAHtB,MAHP,SAQID,EAAO,UACV/J,OAAOqD,SAAS8G,SAAS,KAAInK,OAAOqD,SAAS+G,KAAK,IAAGL,GAAOpH,eAGjExC,EAAS0E,SAASf,GAAK6F,IAEnB,MAAA/I,KAAA8B,oBAAA,cACFvC,EAAS0E,SAASf,GAAKlD,KAAC8B,oBAAoB,aAC3C,MAAA2H,SAAAC,MACDnK,EAAS0E,SAASpD,YAAc4I,SAASC,MAEzCnK,EAAS0E,SAASpD,YAAc,UAClCtB,EAAS0E,SAASiE,cAAe,EACjC3I,EAAS0E,SAASkE,cAAe,EAC9BnI,KAACI,WAAYhB,OAAOC,MAAMC,IAAIE,QAAQI,WACF,SAAlCI,KAAC8B,oBAAoB,UACtBvC,EAASkE,MAAMoE,WAAa,cAE5BtI,EAASkE,MAAMoE,WAAa,eAE9BtI,EAASkE,MAAMoE,WAAa,SAG1B,MAAA7H,KAAA8B,oBAAA,YACFmH,EAAejJ,KAAC8B,oBAAoB,gBACjC,IAAI9B,KAACc,eAAgB1B,OAAOC,MAAMC,IAAIE,QAAQE,QACjDuJ,EAAe,cAGf,IADAA,EAAeU,aAAaC,QAAQ,kBAC/BX,EAAL,CACE,MAAOA,GACLA,EAAeY,OAAO,2BAClBZ,IACFA,EAAeA,EAAatG,OAChCgH,cAAaG,QAAQ,gBAAiBb,GAC1CA,EAAeA,EAAatG,OAG5BuG,EAAc9J,OAAOqK,SAASC,MACzBR,GAAiC,MAAlBA,EAAY,KAC9B9J,OAAOqK,SAASC,MAAQ,IAAIT,EAAa,KAAIC,GAE/C3J,EAASkE,MAAM5C,YAAcoI,EAC7BH,EAAUG,EAAalH,cAAgB,IAAMxC,EAAS0E,SAASf,GAC/D3D,EAASkE,MAAMP,GAAK4F,EAEpBE,EAAgC,SAAC5D,GAC/B,GAAA2E,GAAAC,QAAAA,GAAY,GAAG5E,EACf2E,EAAa,SAACE,GACZ,GAAAC,EACA,IADAA,EAAYF,EAAUG,YAAYF,GAC9BC,GAAa,QACfF,GAAYA,EAAUI,OAAO,EAAGF,IACpCH,EAAW,KACXA,EAAW,KACXC,GAEE,MAAAhK,KAAA8B,oBAAA,aACFvC,EAASqB,UAAUsC,GAAKlD,KAAC8B,oBAAoB,aAE7CvC,EAASqB,UAAUsC,GAAK3D,EAASqB,UAAUC,YAAc,IAAMmI,EAA8BzJ,EAAS0E,SAASmB,KAIjHyD,EAAAH,UAAAC,YAAAC,KAAA5I,KAAMT,GACNQ,EAAG,KAAMC,uBAhFgDZ,OAAOC,MAAMC,IAAIC,SAASO","file":"MetadataHandler.js"}