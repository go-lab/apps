function loadDataFromJSON(e){"string"==typeof e&&(e=JSON.parse(e)),console.log(e),this.title=e.metadata.title,this.description=e.metadata.description,this.type=e.metadata.type,this.directed=e.metadata.directed,null!=e.metadata.measures&&(this.measures=e.metadata.measures),this.datalinks=e.metadata.datalinks,null!=e.metadata.nodeproperties&&(this.nodeproperties=e.metadata.nodeproperties),null!=e.metadata.edgeproperties&&(this.edgeproperties=e.metadata.edgeproperties),this.data=e.data,console.log(this.data),initialize(),redraw()}function loadDataFromFile(e){d3.json(e,function(e){this.title=e.metadata.title,this.description=e.metadata.description,this.type=e.metadata.type,this.directed=e.metadata.directed,null!=e.metadata.measures&&(this.measures=e.metadata.measures),this.datalinks=e.metadata.datalinks,null!=e.metadata.nodeproperties&&(this.nodeproperties=e.metadata.nodeproperties),null!=e.metadata.edgeproperties&&(this.edgeproperties=e.metadata.edgeproperties),this.data=e.data,initialize(),redraw()})}function initialize(){null!=measures&&measures.forEach(function(e){d3.select("#measures").append("option").attr("value",e.property).text(e.title)}),initializeMeasureControlsSearch()}function start(){loadData(src[0].toString())}function initializeMeasureControls(){try{var e=d3.select("#customControls");if(null!=e&&null!=e[0][0]){d3.select("#customControls p").remove(),d3.select("#customControls select").remove(),e.append("p").text("Select measure:");var t=e.append("select");t.attr("id","idSelectMeasure").on("change",function(){saveCurrentMeasure(),draw()}).selectAll("option").data(this.measures).enter().append("option").attr("value",function(e){return e.property}).text(function(e){return e.title}),saveCurrentMeasure()}}catch(e){alert(e)}}function saveCurrentMeasure(){try{var e=d3.select("#idSelectMeasure"),t=e.node().options[e.node().selectedIndex];currentMeasure=t.value,currentMeasureLabel=t.text}catch(e){alert(e)}}function calculateTimeapperances(){return taArray=new Array,src.forEach(function(e){taArray.push(e.toString().substring(0,e.toString().indexOf(".")))}),taArray}function updateCurrentTimeByStep(e,t){var a=timeappearances.indexOf(currentTime);a+=e,a>-1&&a<timeappearances.length&&(currentTime=timeappearances[a],dataAppearanceIndex=a,t(),loadData(src[a].toString()))}function onCurrentTimeUpdate(){d3.select("#timeselector").attr("value",currentTime)}function getSizeLabelX(e){var t=16;return e.length>30&&e.length<160?t=16-(e.length-30)/10:e.length>=140&&(t=5),t}function getLabel(e,t){var a="",r=t.filter(function(t){return t.property===e});return null!=r&&r.length>0&&(a=r[0].title),a}function comboBoxSelectOption(e,t){e.node().selectedIndex=t,e.node().selectedIndex==-1&&(e.node().selectedIndex=0)}function checkBoxGetChecked(e){return e[0][0].checked}function searchValue(e,t,a,r){var n,i=e.filter(function(e){return e[t]===a});return null!=i&&i.length>0&&(n=i[0]),null!=n&&(n=n[r]),n}function searchValueObj(e,t,a){var r;return r=e[t],null!=r&&(r=r[a]),r}function removeAllChild(e){for(;e.node().hasChildNodes();)e.node().removeChild(e.node().firstChild)}function initializeMeasureControlsSearch(){try{var e=d3.select("#customControlsSearch");null!=e&&null!=e.node()&&(removeAllChild(e),e.append("p").text("Search Value:"),e.append("datalist").attr("id","idDataList").selectAll("option").data(data.map(function(e){return e[propertySearch]})).enter().append("option").attr("value",function(e){return e}),e.append("input").attr("id","idTbSearch").attr("type","text").attr("list","idDataList"),e.append("input").attr("id","idBtSearch").attr("type","button").attr("value","Search").on("click",function(){search()}),e.append("input").attr("id","idBtClean").attr("type","button").attr("value","Clean").on("click",function(){clean()}),e.append("div").attr("id","idDivResultSearch").style("height","140px").style("overflow","auto").style("border-style","groove"))}catch(e){alert(e)}}function search(){var e=searchData(),t=d3.select("#idDivResultSearch");null!=t&&null!=t.node()&&removeAllChild(t);try{showDataInVisualization(e)}catch(e){}if(null!=e.data){var t=d3.select("#idDivResultSearch");if(null!=t){var a="Label: "+e.data.label+"<br>";for(i in this.measures){var r=this.measures[i];a+=r.title+": "+e.data[r.property]+"<br>"}t.append("p").html(a)}}if(null!=e.coData){var t=d3.select("#idDivResultSearch");if(null!=t)for(indexData in e.coData){var n=e.coData[indexData],a="Label: "+n.label+"<br>";for(indexMeasure in this.measures){var r=this.measures[indexMeasure];a+=r.title+": "+n[r.property]+"<br>"}t.append("p").html(a)}}}function searchData(){var e=new Object;e.index=-1,e.data=null,e.coData=null;var t=d3.select("#idTbSearch").property("value").toString();if(null!=t&&""!=t){for(i in this.data){var a=this.data[i];a[propertySearch]==t&&(e.index=i,e.data=this.data[i])}e.index==-1&&(e.coData=this.data.filter(function(e){var t=d3.select("#idTbSearch").property("value").toString().toUpperCase(),a=e.label.toUpperCase();return!!a.contains(t)}))}return e}function clean(){var e=d3.select("#idDivResultSearch");null!=e&&null!=e.node()&&removeAllChild(e);var t=d3.select("#idTbSearch");t.each(function(){var e=this;e.value=""})}var title,description,directed,measures,datalinks,nodeproperties,edgeproperties,nodes,edges,timeappearances,currentTime,dataAppearanceIndex=0,defaultRadius=6,nodeColors=d3.scale.category10(),exploration=!1,propertySearch="label";