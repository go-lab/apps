{"version":3,"sources":["multiResourceEventEmitterModel.coffee"],"names":["bind","fn","me","apply","arguments","window","ut","commons","MultiResourceEventEmitterModel","superClass","environmentHandlers","resourceTypes","singleResourceCreator","metadataHandler","resourceTypeFilter","this","__super__","constructor","call","Error","storageHandler","setForAppIdFilter","_resourceTypesLabel","getResourceType","length","metadata","resourceType","target","objectType","indexOf","setForResourceTypeFilter","setCustomFilter","join","_resourceTypes","_resources","_orderedResources","_ilsStructure","_ilsStructureLoaded","_appsMap","getMetadataHandler","getContext","golab","ils","context","graasp","getILSStructure","_this","error","ilsStructure","console","warn","JSON","stringify","emitEvent","_debug","log","setIlsStructure","createNewModel","applyLogLoad","activityStreamObject","callback","reloadResources","object","content","resourcesToReload","i","len","reload","resourceToReload","singleResource","getResourceById","id","push","loadFromResource","emitModelLoaded","getDebugLabel","getDisplayName","createResource","updateResource","deleteResource","loadFromResourceContent","ref","resourceContent","resources","appExists","filterLatestMatadatas","latestMetadatas","loadLatestResource","startLoadLatestResource","listResourceMetaDatas","metadatas","filterOutNonExistingApplications","findLatestMetadatas","getUpToDateLoadedResource","loadLatestResourceForMetadatas","reloadedResources","updateOrderedResources","aMetadata","appId","latestMetadataMap","latestMetadataPublished","metadataPublished","results","generator","Date","published","loadedResource","loadedResourcePublishedDate","resourcePublishedDate","getMetadata","getTime","metadataList","resourceId","slice","clearChanged","loadFromResourceId","addResourcesByApps","findResourceByAppId","phase","getIlsStructure","resource","getAppId","phaseTitle","apps","app","orderedResources","phases","displayName","addListener","getResources","getOrderedResources","getId","getResourceContent","getResource","clearContent","splice","createAppsMap","appsMap","j","k","len1","len2","ref1","ref2","isIlsStructureLoaded","ResourceEventEmitterModel"],"mappings":"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","file":"multiResourceEventEmitterModel.js"}