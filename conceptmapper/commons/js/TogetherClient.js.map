{"version":3,"sources":["TogetherClient.coffee"],"names":["bind","fn","me","apply","arguments","window","ut","commons","TogetherClient","model","metadataHandler","actionLogger","masterModel","this","debug","showStatistics","console","log","verbsWhitelist","sessionStorage","removeItem","TogetherJSConfig_hubBase","TogetherJSConfig_dontShowClicks","TogetherJSConfig_autoStart","TogetherJSConfig_disableWebRTC","TogetherJSConfig_disableChat","TogetherJSConfig_disableShareButton","TogetherJSConfig_getUserName","getUserName","TogetherJSConfig_on_ready","initTogether","TogetherJSConfig_toolName","getMetadata","generator","displayName","TogetherJSConfig_suppressJoinConfirmation","TogetherJSConfig_suppressInvite","TogetherJSConfig_ignoreForms","TogetherJSConfig_findRoom","createSessionID","TogetherJSTestSpy","golab","common","resourceLoader","ready","orderedLoad","sessionID","underScoreIndex","indexOf","id","warn","substring","length","actor","objectType","masterId","selfId","TogetherJS","require","Self","chatRecord","chatStatistics","actionStatistics","getAllPeers","lpg","LeavePageDetector","addHandler","leaveSession","addLogListener","hub","on","welcomeLatecomer","peerDisconnected","chatReceived","setInitialState","setChatRecord","setActionStatistics","setCurrentState","applyActionLogMessage","electMaster","logChat","fixDock","initStatisticsDock","updateChatChart","updateActionChart","$","append","draggable","containment","chatChart","Highcharts","Chart","credits","enabled","chart","renderTo","type","title","text","xAxis","categories","series","name","data","actionChart","color","Object","keys","setData","map","_this","key","message","logObject","messageId","clientId","logSend","i","len","newMasterId","peer","ref","status","idle","iAmMaster","sendCurrentState","getActor","close","send","forClient","getResourceContent","loadContentFromExternalState","increaseChatStatistic","increaseActionStatistic","abbrev","am","chatMessage","clientIdWithoutDot","date","hours","minutes","person","Date","getHours","getMinutes","replace","clearTimeout","logActionSentTimeout","logAction","verb","running","call","setTimeout","chatSent","push","object","now","applyLogAction"],"mappings":"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","file":"TogetherClient.js"}