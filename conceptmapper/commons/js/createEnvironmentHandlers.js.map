{"version":3,"sources":["createEnvironmentHandlers.coffee"],"names":["$","DEFAULT_NOTIFICATION_SERVER","cacheCleared","createEnvironmentHandlers","createMultipleEnvironmentHandlers","createSingleEnvironmentHandlers","debug","dummy","forceLocal","ils","updateDefaultTargetNames","this","golab","common","context","storage","ude","commons","window","options","cache","notificationServer","when","documentType","toolName","desiredLanguage","callBack","checkForReady","findDesiredNotificationServer","findDesiredStorageServer","getClearStorageCacheBeforeFirstUse","getDesiredLoggingTarget","getDesiredStorageHandler","getNotificationClient","getParameterFromUrl","getUseStorageCache","languageHandlerCallBack","metadata","metadataHandlerCallback","receivedLanguageHandler","receivedMetadataHandler","key","i","len","parameter","part","partParts","parts","queryPart","toLowerCase","location","search","trim","substring","split","length","metadataHandler","server","console","warn","getContext","standalone","graasp","preview","unknown","desiredStorageServer","storageHandler","Error","LocalStorageHandler","MongoStorageHandler","VaultStorageHandler","MongoIISStorageHandler","protocol","MemoryStorageHandler","direct","setForUserFilter","setForAppIdFilter","setForProviderFilter","loggingTarget","DisabledNotificationClient","NotificationClient","desiredServer","bind","indexOf","toLocaleLowerCase","actionLogger","clearStorageCacheBeforeFirstUse","notificationClient","ref","log","ut","actionlogging","ActionLogger","setLoggingTarget","clearCachingStorageHandlerCache","createCachingStorageHandler","error","cachingStorageHandler","languageHandler","id","published","actor","objectType","displayName","target","utils","generateUUID","generator","url","href","provider","inquiryPhase","inquiryPhaseId","inquiryPhaseName","gadgets","GoLabMetadataHandler","LocalMetadataHandler","createLanguageHandler","environmentHandlers","documentTypes","defaultTargetName","documentTypeDisplay","results","getMessage","setTargetDisplayName","createSingleEnvironmentHandlersPromise","createSingleEnvironmentHandlersPromises","_this","deferred","Deferred","myEnvironmentHandlers","resolve","promise","push","apply","done","getLanguage","Array","isArray"],"mappings":"CAAA,WAAA,YAAA,IAAAA,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAEAC,MAACC,MAAQD,KAACC,UACVD,KAACC,MAAMC,OAASF,KAACC,MAAMC,WACvBF,KAACC,MAAMH,IAAME,KAACC,MAAMH,QACpBA,EAAME,KAACC,MAAMH,IACbA,EAAIK,QAAUH,KAACC,MAAMH,IAAIK,YACzBL,EAAIM,QAAUJ,KAACC,MAAMH,IAAIM,YACzBJ,KAACK,IAAML,KAACK,QACRL,KAACK,IAAIC,QAAUN,KAACK,IAAIC,YAEpBjB,EAAIkB,OAAOlB,EAMXO,GACEQ,WACAI,SACEC,OAAO,EACPC,uBAEFC,SAGFrB,EAA8B,+BAE9BK,GAAQ,EAGRE,GAAa,EAGbN,GAAe,EAEfG,EAAkC,SAACkB,EAAcC,EAAUC,EAAiBN,EAASO,GACnF,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,QAAqB,kBAAXrB,KACRO,EAAWP,EACXA,MAEFqB,EAA0B,KAC1BD,EAA0B,KAE1BL,EAAsB,SAACO,GACrB,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAGA,IAHAP,EAAMA,EAAIQ,cACVL,EAAY,KACZI,EAAYE,SAASC,OAAOC,OAAOH,cAC/BD,GAA6B,MAAhBA,EAAU,GAEzB,IADAD,EAAQC,EAAUK,UAAU,GAAGC,MAAM,KACrCZ,EAAA,EAAAC,EAAAI,EAAAQ,OAAAb,EAAAC,EAAAD,WACEI,EAAYD,EAAKS,MAAM,KACC,IAApBR,EAAUS,QAAeT,EAAU,KAAML,IAC3CG,EAAYE,EAAU,UAC5BF,IAEFf,EAA2B,SAAC2B,GAC1B,GAAAC,EAAA,OAAIjD,GACK,SACTiD,EAASvB,EAAoB,iBAC1BuB,IACDA,EAAA,WAAS,OAAOA,EAAOR,eAAd,IACF,QADE,IACO,UADP,IACkB,QADlB,IAC2B,QAD3B,IACqC,aADrC,IACmD,eACxDQ,GAAOR,aAFF,eAILS,SAAQC,KAAK,oCAAoCF,GACjD,UACFA,IACFA,EAAA,WAAS,OAAOD,EAAgBI,cAAvB,IACFnD,GAAIK,QAAQ+C,iBACf,OAFK,KAGFpD,GAAIK,QAAQL,IAHV,IAGeA,GAAIK,QAAQgD,aAChC,OAJK,KAKFrD,GAAIK,QAAQiD,cACf,QANK,eAQL,aACNN,IAEF7B,EAAgC,SAAC4B,GAC/B,GAAAC,EAAA,IAAIjD,GAA4C,OAA9BW,EAAQE,mBACxB,MAAO,KAET,IADAoC,EAASvB,EAAoB,sBAChB,SAAVuB,QACD,KACG,IAAa,OAAVA,QAONA,EANA,QAAOD,EAAgBI,cAAvB,IACOnD,GAAIK,QAAQiD,QADnB,IAC4BtD,GAAIK,QAAQkD,cACpC,KAFJ,eAII7C,GAAQE,qBAIhBW,EAA2B,SAACwB,GAC1B,GAAAS,GAAAC,CAAA,IAAO,MAAAV,EAEL,KAAU,IAAAW,OAAM,qFAoBlB,QAnBAF,EAAuBpC,EAAyB2B,GAChDU,EAAA,WAAiB,OAAOD,GAAP,IACV,cACC,IAAAxD,GAAIM,QAAQqD,oBAAoBZ,EAFvB,KAGV,gBACC,IAAA/C,GAAIM,QAAQsD,oBAAoBb,EAAiB,oCAJxC,KAKV,mBACC,IAAA/C,GAAIM,QAAQsD,oBAAoBb,EAAiB,wBANxC,KAOV,cACC,IAAA/C,GAAIM,QAAQuD,oBAAoBd,EARvB,KASV,cAEC,IAAA/C,GAAIM,QAAQwD,uBAAuBf,EAAoBtC,OAAOgC,SAASsB,SAAS,kDAXvE,KAYV,eACC,IAAA/D,GAAIM,QAAQ0D,qBAAqBjB,EAbxB,eAebE,SAAQC,KAAK,2BAA2BM,GACpC,GAAAxD,GAAIM,QAAQqD,oBAAoBZ,OAEjCA,EAAgBI,cAAvB,IACOnD,GAAIK,QAAQiD,QADnB,IAC4BtD,GAAIK,QAAQ4D,OADxC,IACgDjE,GAAIK,QAAQkD,QACxDE,EAAeS,kBAAiB,GAChCT,EAAeU,mBAAkB,GACjCV,EAAeW,sBAAqB,UAEvCX,EAAgBD,IAEnBlC,EAA0B,SAACyB,GACzB,GAAAsB,EAAA,OAAO,OAAAtB,GAELE,QAAQC,KAAK,kFACN,SACTmB,EAAgB5C,EAAoB,iBAChC4C,IACFA,EAAA,WAAgB,OAAOtB,EAAgBI,cAAvB,IACTnD,GAAIK,QAAQ+C,iBAEf,cAHY,KAITpD,GAAIK,QAAQL,IAJH,IAIQA,GAAIK,QAAQgD,aAChC,YALY,eAOZ,YACNgB,IAEF7C,EAAwB,SAACuB,GACvB,GAAAuB,GAAAC,EAAAC,CAIA,OAJAD,GAAqB9D,OAAOF,IAAIC,QAAQ+D,mBAAmBE,KAAK,KAAM1B,GACtEuB,EAA6B7D,OAAOF,IAAIC,QAAQ8D,2BAChDE,EAAgBrD,EAA8B4B,GAEzB,OAAjByB,EACKF,EAA2B,kGAGf,SAAjBE,IACFA,EAAgBhF,GAEc,WAA5BiB,OAAOgC,SAASsB,UAA2D,IAAnCS,EAAcE,QAAQ,UACzDJ,EAA2B,6GAE+BE,EAAc,MACjFD,EAAmBC,KAErB9C,EAAqB,SAAC8B,GACpB,GAAA7C,EACA,IADAA,EAAQc,EAAoB,SAE1B,OAAOd,EAAMgE,qBAAb,IACO,OADP,IACe,KACX,OAAO,CAFX,KAGO,QAHP,IAGgB,MACZ,OAAO,EACb,GAAIjE,EAAQC,SAAS,EACnB,OAAO,CAET,QAAO6C,GAAP,IACO,QADP,IACgB,UADhB,IAC2B,QAD3B,IACoC,eAChC,CAFJ,gBAII,IAENnC,EAAqC,SAACmC,EAAsBT,GAE1D,OAAOA,EAAgBI,cAAvB,IACO1C,QAAON,MAAMH,IAAIK,QAAQL,WAC5B,CAFJ,gBAII,IAENkB,EAAgB,WACd,GAAA0D,GAAAC,EAAArB,EAAAsB,EAAAC,EAAAtB,CAAA,IAAI1B,GAA2BD,EAS7B,MARIjC,IAAYoD,QAAQ+B,IAAI,iDAAiDjD,EAAwBoB,cACrG2B,EAAqBtD,EAAsBO,GAC3C6C,EAAmB,GAAAnE,QAAOwE,GAAGzE,QAAQ0E,cAAcC,aAAapD,GAChE6C,EAAaQ,iBAAiB9D,EAAwBS,IACtD0B,EAAiB,KACjBD,EAAuB,KACvBuB,EAAyCxD,EAAyBQ,GAAjE0B,EAAAsB,EAAA,GAAgBvB,EAAAuB,EAAA,GAEbrD,EAAmB8B,EAAsBzB,IAC3C8C,EAAkCxD,EAAmCmC,EACnEzB,GACE8C,IAAoCpF,IACtCgB,OAAON,MAAMH,IAAIM,QAAQ+E,kCACzB5F,GAAe,GACjBgB,OAAON,MAAMH,IAAIM,QAAQgF,4BAA4B7B,GAAgB,EACnE,SAAC8B,EAAOC,GACN,MAAID,IACFtC,QAAQC,KAAK,oGACbD,QAAQC,KAAKqC,GACbtE,EAASc,EAAyB0B,EAAgBmB,EAAc9C,EAC9DgD,IAEF7D,EAASc,EAAyByD,EAAuBZ,EAAc9C,EACrEgD,IACN/D,IAEFE,EAASc,EAAyB0B,EAAgBmB,EAAc9C,EAAyBgD,IAE/FjD,EAA0B,SAAC0D,EAAOxC,GAChC,MAAIwC,GACFtC,QAAQsC,MAAM,qCAAqCA,IAEnDxD,EAA0BgB,EAC1B7B,MAEJS,EAA0B,SAAC4D,EAAOE,GAChC,MAAIF,IACFtC,QAAQsC,MAAM,qCAAqCA,GACnDzD,EAA0B,OAC1BZ,MAEAY,EAA0B2D,EAC1BvE,MAGJU,GAEE8D,GAAM,GACNC,UAAa,GACbC,OACEC,WAAc,SACdH,GAAM,UACNI,YAAe,WACjBC,QACEF,WAAc/E,EACd4E,GAAMT,GAAGzE,QAAQwF,MAAMC,eACvBH,YAAe,WAAWhF,GAC5BoF,WACEL,WAAc,cACdM,IAAO1F,OAAOgC,SAAS2D,KACvBV,GAAMT,GAAGzE,QAAQwF,MAAMC,eACvBH,YAAe/E,GACjBsF,UACER,WAAc,MACdM,IAAO1F,OAAOgC,SAAS2D,KACvBV,GAAM,UACNY,aAAgB,UAChBC,eAAkB,UAClBC,iBAAoB,UACpBV,YAAe,YAEhB,MAAArF,OAAAgG,QACG,GAAAzG,GAAI4B,SAAS8E,qBAAqB9E,EAAUC,GAE5C,GAAA7B,GAAI4B,SAAS+E,qBAAqB/E,EAAUC,GAClDpB,OAAON,MAAMyG,sBAAsB5F,EAAiBW,IAEtD1B,EAA2B,SAAC4G,EAAqBC,GAC/C,GAAAC,GAAAjG,EAAAkG,EAAA/E,EAAAwD,EAAAvD,EAAA+E,MAAAxB,EAAkBoB,EAAoBpB,gBACtCwB,KAAAhF,EAAA,EAAAC,EAAA4E,EAAAhE,OAAAb,EAAAC,EAAAD,WACE+E,EAAsBvB,EAAgByB,WAAW,uBAAuBpG,GACxEiG,EAAoBF,EAAoBpB,gBAAgByB,WAAW,yBAA0BF,UAC7FH,EAAoB/F,GAAciC,gBAAgBoE,qBAAqBJ,cAE3EpH,EAAoC,SAACmH,EAAe/F,EAAUC,EAAiBN,EAASO,GACtF,GAAAmG,GAAAC,EAAAvG,EAAA+F,EAAA5E,EAAAC,CAAA,IAA4B,IAAxB4E,EAAchE,OAChB,KAAM,sCAwBR,KAvBA+D,GACE9F,SAAUA,GAEZqG,EAAyC,SAAAE,SAAA,UAACxG,GAExC,GAAAyG,EAeA,OAfAA,GAAe,GAAAhI,GAAEiI,SACjB5H,EAAgCkB,EAAcC,EAAUC,EAAiBN,EACvE,SAACqC,EAAiBU,EAAgBmB,EAAca,EAAiBX,GAC/D,GAAA2C,SAAAA,IACE1E,gBAAiBA,EACjBU,eAAgBA,EAChBmB,aAAcA,GAEhBiC,EAAoB/F,GAAgB2G,EAC/BZ,EAAoBpB,kBACvBoB,EAAoBpB,gBAAkBA,GACnCoB,EAAoB/B,qBACvB+B,EAAoB/B,mBAAqBA,GAC3CyC,EAASG,YAENH,EAASI,YAjBuBzH,MAmBzCmH,KACApF,EAAA,EAAAC,EAAA4E,EAAAhE,OAAAb,EAAAC,EAAAD,WACEoF,EAAwCO,KAAKR,EAAuCtG,UACtFvB,GAAEsB,KAAKgH,MAAMtI,EAAG8H,GAAyCS,KAAK,iBAC5D7H,GAAyB4G,EAAqBC,GAC9C7D,QAAQ+B,IAAI,wDAAwDhE,EAAgB,YAAW6F,EAAoBpB,gBAAgBsC,cAAc,MACjJ9E,QAAQ+B,IAAI6B,GACZ5F,EAAS4F,MAIbnH,EAA4B,SAACoH,EAAe/F,EAAUC,EAAiBN,EAASO,GAM9E,MALqB,kBAAXP,KACRO,EAAWP,EACXA,MACuC,mBAA9BA,GAAQE,qBACjBF,EAAQE,mBAAqB,MAC3BoH,MAAMC,QAAQnB,GAChBnH,EAAkCmH,EAAe/F,EAAUC,EAAiBN,EAASO,GAErFrB,EAAgCkH,EAAe/F,EAAUC,EAAiBN,EAASO,IAEvFf,KAACC,MAAMC,OAAOV,0BAA4BA","file":"createEnvironmentHandlers.js"}