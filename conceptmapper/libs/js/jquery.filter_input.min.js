(function($){$.fn.extend({filter_input:function(options){var defaults={regex:".",negkey:false,live:false,events:"keypress paste"};var options=$.extend(defaults,options);function filter_input_function(event){var input=event.input?event.input:$(this);if(event.ctrlKey||event.altKey)return;if(event.type=="keypress"){var key=event.charCode?event.charCode:event.keyCode?event.keyCode:0;if(key==8||key==9||key==13||key==35||key==36||key==37||key==39||key==46){if(event.charCode==0&&event.keyCode==key){return true}}var string=String.fromCharCode(key);if(options.negkey&&string==options.negkey){if(input.val().substr(0,1)==string){input.val(input.val().substring(1,input.val().length)).change()}else{input.val(string+input.val()).change()}return false}var regex=new RegExp(options.regex)}else if(event.type=="paste"){input.data("value_before_paste",event.target.value);setTimeout(function(){filter_input_function({type:"after_paste",input:input})},1);return true}else if(event.type=="after_paste"){var string=input.val();var regex=new RegExp("^("+options.regex+")+$")}else{return false};if(regex.test(string)){return true}else if(typeof options.feedback=="function"){options.feedback.call(this,string)}if(event.type=="after_paste")input.val(input.data("value_before_paste"));return false}var jquery_version=$.fn.jquery.split(".");if(options.live){if(parseInt(jquery_version[0])>=1&&parseInt(jquery_version[1])>=7){$(this).on(options.events,filter_input_function)}else{$(this).live(options.events,filter_input_function)}}else{return this.each(function(){var input=$(this);if(parseInt(jquery_version[0])>=1&&parseInt(jquery_version[1])>=7){input.off(options.events).on(options.events,filter_input_function)}else{input.unbind(options.events).bind(options.events,filter_input_function)}})}}})})(jQuery);